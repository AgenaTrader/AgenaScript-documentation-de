<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../favicon.ico">
  
  <title>Umgang mit Bars und Instrumenten - AgenaScript Dokumentation (Deutsch)</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../custom.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Umgang mit Bars und Instrumenten";
    var mkdocs_page_input_path = "umgang_mit_bars_und_instrumenten.md";
    var mkdocs_page_url = "/umgang_mit_bars_und_instrumenten/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-74646070-1', 'agenatrader.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> AgenaScript Dokumentation (Deutsch)</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Los gehts</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Umgang mit Bars und Instrumenten</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#umgang-mit-bars-und-instrumenten">Umgang mit Bars und Instrumenten</a></li>
                
                    <li><a class="toctree-l4" href="#bars-candles">Bars (Candles)</a></li>
                
                    <li><a class="toctree-l4" href="#eigenschaften-von-bars">Eigenschaften von Bars</a></li>
                
                    <li><a class="toctree-l4" href="#barscount">Bars.Count</a></li>
                
                    <li><a class="toctree-l4" href="#barscurrentsessionbegintime">Bars.CurrentSessionBeginTime</a></li>
                
                    <li><a class="toctree-l4" href="#barscurrentsessionendtime">Bars.CurrentSessionEndTime</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetbar">Bars.GetBar</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetbarindex">Bars.GetBarIndex</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetbarsago">Bars.GetBarsAgo</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetbyindex">Bars.GetByIndex</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetclose">Bars.GetClose</a></li>
                
                    <li><a class="toctree-l4" href="#barsgethigh">Bars.GetHigh</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetlow">Bars.GetLow</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetnextsessiontimespan">Bars.GetNextSessionTimeSpan</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetopen">Bars.GetOpen</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetsessionbegin">Bars.GetSessionBegin</a></li>
                
                    <li><a class="toctree-l4" href="#barsgettime">Bars.GetTime</a></li>
                
                    <li><a class="toctree-l4" href="#barsgetvolume">Bars.GetVolume</a></li>
                
                    <li><a class="toctree-l4" href="#barsinstrument">Bars.Instrument</a></li>
                
                    <li><a class="toctree-l4" href="#barsiseod">Bars.IsEod</a></li>
                
                    <li><a class="toctree-l4" href="#barsisfalling">Bars.IsFalling</a></li>
                
                    <li><a class="toctree-l4" href="#barsisfirstbarinsession">Bars.IsFirstBarInSession</a></li>
                
                    <li><a class="toctree-l4" href="#barsisgrowing">Bars.isGrowing</a></li>
                
                    <li><a class="toctree-l4" href="#barsisintraday">Bars.IsIntraday</a></li>
                
                    <li><a class="toctree-l4" href="#barsisntb">Bars.IsNtb</a></li>
                
                    <li><a class="toctree-l4" href="#barsissessionbreak">Bars.IsSessionBreak</a></li>
                
                    <li><a class="toctree-l4" href="#barslastbarcompleteness">Bars.LastBarCompleteness</a></li>
                
                    <li><a class="toctree-l4" href="#barsnextsessionbegintime">Bars.NextSessionBeginTime</a></li>
                
                    <li><a class="toctree-l4" href="#barsnextsessionendtime">Bars.NextSessionEndTime</a></li>
                
                    <li><a class="toctree-l4" href="#barstailbottom">Bars.TailBottom</a></li>
                
                    <li><a class="toctree-l4" href="#barstailtop">Bars.TailTop</a></li>
                
                    <li><a class="toctree-l4" href="#barstickscountforlastbar">Bars.TicksCountForLastBar</a></li>
                
                    <li><a class="toctree-l4" href="#barstickscountintotal">Bars.TicksCountInTotal</a></li>
                
                    <li><a class="toctree-l4" href="#barstimeframe">Bars.TimeFrame</a></li>
                
                    <li><a class="toctree-l4" href="#barscountforsession">BarsCountForSession</a></li>
                
                    <li><a class="toctree-l4" href="#processingbarseriesindex">ProcessingBarSeriesIndex</a></li>
                
                    <li><a class="toctree-l4" href="#collections">Collections</a></li>
                
                    <li><a class="toctree-l4" href="#chartdrawings">ChartDrawings</a></li>
                
                    <li><a class="toctree-l4" href="#inseries">InSeries</a></li>
                
                    <li><a class="toctree-l4" href="#lines">Lines</a></li>
                
                    <li><a class="toctree-l4" href="#plotcolors">PlotColors</a></li>
                
                    <li><a class="toctree-l4" href="#plots">Plots</a></li>
                
                    <li><a class="toctree-l4" href="#values">Values</a></li>
                
                    <li><a class="toctree-l4" href="#data-series">Data Series</a></li>
                
                    <li><a class="toctree-l4" href="#open">Open</a></li>
                
                    <li><a class="toctree-l4" href="#opens">Opens</a></li>
                
                    <li><a class="toctree-l4" href="#high">High</a></li>
                
                    <li><a class="toctree-l4" href="#highs">Highs</a></li>
                
                    <li><a class="toctree-l4" href="#low">Low</a></li>
                
                    <li><a class="toctree-l4" href="#lows">Lows</a></li>
                
                    <li><a class="toctree-l4" href="#close">Close</a></li>
                
                    <li><a class="toctree-l4" href="#closes">Closes</a></li>
                
                    <li><a class="toctree-l4" href="#median">Median</a></li>
                
                    <li><a class="toctree-l4" href="#medians">Medians</a></li>
                
                    <li><a class="toctree-l4" href="#typical">Typical</a></li>
                
                    <li><a class="toctree-l4" href="#typicals">Typicals</a></li>
                
                    <li><a class="toctree-l4" href="#weighted">Weighted</a></li>
                
                    <li><a class="toctree-l4" href="#weighteds">Weighteds</a></li>
                
                    <li><a class="toctree-l4" href="#time">Time</a></li>
                
                    <li><a class="toctree-l4" href="#times">Times</a></li>
                
                    <li><a class="toctree-l4" href="#volume">Volume</a></li>
                
                    <li><a class="toctree-l4" href="#volumes">Volumes</a></li>
                
                    <li><a class="toctree-l4" href="#timeframe">TimeFrame</a></li>
                
                    <li><a class="toctree-l4" href="#timeframes">TimeFrames</a></li>
                
                    <li><a class="toctree-l4" href="#instruments">Instruments</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentcompare">Instrument.Compare</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentcurrency">Instrument.Currency</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentdigits">Instrument.Digits</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentetf">Instrument.ETF</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentexchange">Instrument.Exchange</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentexpiry">Instrument.Expiry</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentgetcurrencyfactor">Instrument.GetCurrencyFactor</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentinstrumenttype">Instrument.InstrumentType</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentmainsector">Instrument.MainSector</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentmargin">Instrument.Margin</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentname">Instrument.Name</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentpointvalue">Instrument.PointValue</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentround2ticksize">Instrument.Round2TickSize</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentsymbol">Instrument.Symbol</a></li>
                
                    <li><a class="toctree-l4" href="#instrumentticksize">Instrument.TickSize</a></li>
                
                    <li><a class="toctree-l4" href="#multibars">Multibars</a></li>
                
                    <li><a class="toctree-l4" href="#processingbarindexes">ProcessingBarIndexes</a></li>
                
                    <li><a class="toctree-l4" href="#processingbarseriesindex_1">ProcessingBarSeriesIndex</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../ereignisse/">Ereignisse</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../strategieprogrammierung/">Strategieprogrammierung</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../schluesselworte/">Schlüsselworte</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../zeichenobjekte/">Zeichenobjekte</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../tipps_und_tricks/">Tipps und Tricks</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">AgenaScript Dokumentation (Deutsch)</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Umgang mit Bars und Instrumenten</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/AgenaTrader/AgenaScript-documentation-de/edit/master/sources/umgang_mit_bars_und_instrumenten.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="umgang-mit-bars-und-instrumenten">Umgang mit Bars und Instrumenten</h1>
<p>Unter "Daten" werden hier einerseits Informationen verstanden, die "von außen" in AgenaTrader geladen werden und zum anderen Datenreihen, die aus selbst erstellten AgenaSripts stammen.</p>
<p>Detailierte Informatonen finden sich unter dem jeweiligen Stichwort.</p>
<p><a href="#bars-candles">Bars (Candles)</a></p>
<p><a href="#collections">Collections</a></p>
<p><a href="#data-series">Data series</a></p>
<p><a href="#instruments">Instruments</a></p>
<p><a href="#multibars">Multibars</a></p>
<h2 id="bars-candles">Bars (Candles)</h2>
<h3 id="funktionsweise">Funktionsweise</h3>
<p>Ein klassischer Indikator berechnet üblicherweise aus einer vorliegenden Datenreihe einen oder mehrere Werte.</p>
<p>Datenreihen können dabei z.B. alle Schlusskurse oder auch alle Tiefkurse eines Tages, einer Stunde oder einer 10 Min. Periode sein.</p>
<p>Jeder Periode (also jeder Kerze eines Tages, einer Stunde usw.) wird/werden folglich ein oder mehrere Indikatorwert(e) zugeordnet.</p>
<p>Im Folgenden gehen wir von einem Indikatorwert, wie z.B. bei einem gleitenden Durchschnitt aus.</p>
<p>Zur Berechnung eines gleitenden Durchschnitts benötigt AgenaTrader eine Datenreihe. Im Beispiel nehmen wir die Schlusskurse. Alle Schlusskurse der Bars (Kerzen), die in einem Chart dargestellt sind, sind in einer Liste gespeichert und sozusagen durchnummeriert.</p>
<p>Der aktuelle Schlusskurs, also der Schlusskurs des Bars, der am rechten Rand des Charts dargestellt wird, bekommt die Nummer 0. Der Bar links davon die Nummer 1 usw. Der älteste dargestellte Bar hat dann z.B. die Nummer 500.</p>
<p>Kommt im Laufe der Handelssitzung ein neuer Bar hinzu, erhält dieser nun die Nummer 0, der links von ihm, der gerade noch die Nummer 0 hatte, wird zu Nummer 1 usw. Der letzte dargestellte Bar wird zu Nummer 501.</p>
<p>In einem Script (einem selbsterstellten Programm) steht [<em>Close</em>](#close für die Liste (Array) aller Schlusskurse. Der letzte Schlusskurs ist dann <em>Close [0]</em>; t der Schlusskurs davor (bei Tagesdaten ist das z.B. der Schlusskurs von gestern) ist <em>Close [1]</em>,  der davor  <em>Close [2]</em> bis zum ersten Bar im Chart (ganz links) mit <em>Close [501]</em>. Die Zahl in den eckigen Klammern ist ein Index. In AgenaTrader steht hierfür im allgemeinen Fall der Ausdruck "barsAgo". </p>
<p>Für jeden Bar gibt es nicht nur Close, sondern zudem auch <a href="#high"><em>High</em></a>, <a href="#low"><em>Low</em></a>, <a href="#open"><em>Open</em></a>, <a href="#median"><em>Median</em></a>, <a href="#typical"><em>Typical</em></a>, <a href="#weighted"><em>Weighted</em></a>, <a href="#time"><em>Time</em></a> and <a href="#volume"><em>Volume</em></a>. Das Hoch der Kerze, von vor 10 Tagen ist also z.B.  <em>High [10]</em>, Das Tief von gestern <em>Low [1]</em>...</p>
<p><strong>wichtiger Hinweis</strong></p>
<p>Die o.g. Beispiele gelten, wenn die Berechnung am Ende einer Periode erfolgt. Die Werte der aktuell laufenden (noch nicht fertigen Kerze) sind nicht berücksichtigt.
Möchte man bereits auf die Werte der sich gerade ausbildenden Kerze zurückgreifen, muß man dies AgenaTrader im Script mit <a href="#CalculateOnClosedBar"><em>CalculateOnClosedBar</em></a>= false mitteilen.</p>
<p>In diesem Fall bekommt der aktuell laufende Bar die Nummer 0, der Bar links neben dem aktuell laufenden die Nummer 1 usw. Der letzte Bar (im Beispiel oben) hätte jetzt die Nummer 502.</p>
<p>Mit close [0] bekommt man nun den jeweils letzten Kurs, der gerade vom Datenanbieter an AgenaTrader übermittelt wurde. Alle Werte des Bars (high [0], low [0]…) können sich solange verändern, bis der Bar fertig ausgebildet ist und ein neuer Bar begonnen hat. Nur Open[0] ändert sich auch in diesem Fall nicht mehr.</p>
<h2 id="eigenschaften-von-bars">Eigenschaften von Bars</h2>
<h3 id="eigenschaften-von-bars_1">Eigenschaften von Bars</h3>
<p>"Bars" steht für eine Liste aller Bars (Kerzen) in einem Chart (siehe <a href="#functionality"><em>Functionality</em></a>(#functionality)<a href="#bars"><em>Bars</em></a>).</p>
<p>Bars (<strong>public</strong> IBars Bars) kann direkt in einem Script verwendet werden und entspricht in diesem Fall BarsArray [0] (siehe Bars.GetNextSessionTimeSpan).</p>
<p>Eigenschaften werden immer mit einem Punkt hinter dem Objekt (in diesem Falle Bars, der Liste der Kerzen) angegeben.</p>
<p><a href="#barscount"><em>Bars.Count</em></a></p>
<p><a href="#currentsessionbegintime"><em>Bars.CurrentSessionBeginTime</em></a></p>
<p><a href="#currentsessionendtime"><em>Bars.CurrentSessionEndTime</em></a></p>
<p><a href="#barsgetbar"><em>Bars.GetBar</em></a></p>
<p><a href="#barsgetbarindex"><em>Bars.GetBarIndex</em></a></p>
<p><a href="#barsgetbarsago"><em>Bars.GetBarsAgo</em></a></p>
<p><a href="#barsgetbyindex"><em>Bars.GetByIndex</em></a></p>
<p><a href="#barsgetclose"><em>Bars.GetClose</em></a></p>
<p><a href="#barsgethigh"><em>Bars.GetHigh</em></a></p>
<p><a href="#barsgetlow"><em>Bars.GetLow</em></a></p>
<p><a href="#getnextsessiontimespan"><em>Bars.GetNextSessionTimeSpan</em></a></p>
<p><a href="../barsgetopen"><em>Bars.GetOpen</em></a></p>
<p><a href="#getsessionbegin"><em>Bars.GetSessionBegin</em></a></p>
<p><a href="#barsgettime"><em>Bars.GetTime</em></a></p>
<p><a href="#barsgetvolume"><em>Bars.GetVolume</em></a></p>
<p><a href="#barsinstrument"><em>Bars.Instrument</em></a></p>
<p><a href="#barsiseod"><em>Bars.IsEod</em></a></p>
<p><a href="#barsisfalling"><em>Bars.IsFalling</em></a></p>
<p><a href="#barsfirstbarinsession"><em>Bars.IsFirstBarInSession</em></a></p>
<p><a href="#barsisgrowing"><em>Bars.IsGrowing</em></a></p>
<p><a href="#barsisintraday"><em>Bars.IsIntraday</em></a></p>
<p><a href="#barsisntb"><em>Bars.IsNtb</em></a></p>
<p><a href="#barssessionbreak"><em>Bars.SessionBreak</em></a></p>
<p><a href="#barslastbarcompleteness"><em>Bars.LastBarCompleteness</em></a></p>
<p><a href="#nextsessionbegintime"><em>Bars.NextSessionBeginTime</em></a></p>
<p><a href="#nextsessionendtime"><em>Bars.NextSessionEndTime</em></a></p>
<p><a href="#barstailbottom"><em>Bars.TailBottom</em></a></p>
<p><a href="#barstailtop"><em>Bars.TailTop</em></a></p>
<p><a href="#tickscountforlastbar"><em>Bars.TicksCountForLastBar</em></a></p>
<p><a href="#barstickscountintotal"><em>Bars.TicksCountInTotal</em></a></p>
<p><a href="#barstimeframe"><em>Bars.TimeFrame</em></a></p>
<p><a href="#barscountforsession"><em>BarsCountForSession</em></a></p>
<p><a href="#isprocessingbarindexlast"><em>IsProcessingBarIndexLast</em></a></p>
<p>Innerhalb von <strong>OnCalculate()</strong>  können alle Eigenschaften verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Funktion <strong>OnCalculate()</strong> von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden. Falls diese Eigenschaften ausserhalb von <strong>OnCalculate()</strong>  verwendet werden, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit <strong>if</strong> (Bars != <strong>null</strong>) ausgeführt werden.</p>
<h2 id="barscount">Bars.Count</h2>
<h3 id="beschreibung">Beschreibung</h3>
<p>Bars.Count liefert die Anzahl der Bars in einer Datenreihe.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="ruckgabewert">Rückgabewert</h3>
<p>Typ int Anzahl der Bars</p>
<h3 id="verwendung">Verwendung</h3>
<p>Bars.Count</p>
<h3 id="weitere-informationen">Weitere Informationen</h3>
<p>Der Wert von <em>ProcessingBarIndex</em> kann immer nur kleiner oder gleich Bars.Count - 1 sein.</p>
<p>Wenn in AgenaTrader angegeben wurde, wieviel Bars in einen Chart geladen werden sollen, entspricht der Wert von Bars.Count genau dieser Einstellung. Im Beispiel unten würde Bars.Count 500 liefern.</p>
<p><img alt="Bars.Count" src="../media/image1.png" /></p>
<h3 id="beispiel">Beispiel</h3>
<pre><code class="cs">Print (&quot;Es stehen insgesamt&quot; + Bars.Count + &quot;Bars zur Verfügung.&quot;);
</code></pre>

<h2 id="barscurrentsessionbegintime">Bars.CurrentSessionBeginTime</h2>
<h3 id="beschreibung_1">Beschreibung</h3>
<p>Bars.CurrentSessionBeginTime  liefert das Datum und die Uhrzeit des Beginns der aktuell laufenden Handelssitzung.</p>
<p>Datum und Uhrzeit für den Beginn der aktuellen Handelssitzung werden auch dann korrekt angegeben, wenn die Funktion von einem Bar in der Vergangenheit aufgerufen wird.</p>
<h3 id="parameter">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_1">Rückgabewert</h3>
<p>Typ DateTime</p>
<h3 id="verwendung_1">Verwendung</h3>
<p>Bars.GetSessionBegin</p>
<h3 id="weitere-informationen_1">Weitere Informationen</h3>
<p>Die Uhrzeit des zurückgegebenen Wertes entspricht der im MarketEscort angegebenen Startzeit der Handelssitzung des jeweiligen Handelsplatzes. Der für den Wert verwendete Handelsplatz wird im Instrumet Escort eingestellt und kann in AgenaSript mit der Funktion <a href="#instrumentexchange"><em>Instrument.Exchange</em></a> ermittelt.</p>
<p><img alt="Bars.CurrentSessionBeginTime" src="../media/image3.png" /></p>
<h3 id="beispiel_1">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die laufende Handelssitzung hat um  &quot; + Bars.CurrentSessionBeginTime );
</code></pre>

<h2 id="barscurrentsessionendtime">Bars.CurrentSessionEndTime</h2>
<h3 id="beschreibung_2">Beschreibung</h3>
<p>Bars.CurrentSessionEndTime  liefert das Datum und die Uhrzeit für das Ende der aktuell laufenden Handelssitzung.
Datum und Uhrzeit für das Ende der aktuellen Handelssitzung werden auch dann korrekt angegeben, wenn die Funktion von einem Bar in der Vergangenheit aufgerufen wird.</p>
<h3 id="parameter_1">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_2">Rückgabewert</h3>
<p>Typ DateTime</p>
<h3 id="verwendung_2">Verwendung</h3>
<p>Bars.GetSessionEnd</p>
<h3 id="weitere-informationen_2">Weitere Informationen</h3>
<p>Die Uhrzeit des zurückgegebenen Wertes entspricht der im MarketEscort angegebenen Endezeit der Handelssitzung des jeweiligen Handelsplatzes. Der für den Wert verwendete Handelsplatz wird im Instrumet Escort eingestellt und kann in AgenaSript mit der Funktion  <a href="#instrumentexchange"><em>Instrument.Exchange</em></a> ermittelt werden.</p>
<p><img alt="Bars.CurrentSessionEndTime" src="../media/image4.png" /></p>
<h3 id="beispiel_2">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die laufende Handelssitzung endet um &quot; + Bars.CurrentSessionEndTime);
</code></pre>

<h2 id="barsgetbar">Bars.GetBar</h2>
<h3 id="beschreibung_3">Beschreibung</h3>
<p>Bars.GetBar liefert den ersten Bars (vom ältesten zum jüngsten), der dem übergebenen Datum bzw. der Uhrzeit entspricht.</p>
<p>Siehe auch <a href="#barsgetbarsago"><em>Bars.GetBarsAgo</em></a>, <a href="#barsgetbyindex"><em>Bars.GetByIndex</em></a>, <a href="#barsgetbarindex"><em>Bars.GetBarIndex</em></a>.</p>
<h3 id="parameter_2">Parameter</h3>
<p>Typ DateTime</p>
<h3 id="ruckgabewert_3">Rückgabewert</h3>
<p>Typ IBar Bar-Objekt, des dem Zeitstempel entsprichenden Bars</p>
<p>bei Zeitstempel älter als der älteste Bar: 0 (Null)
bei Zeitstempel jünger als der letzte Bar: Index des letzten Bars</p>
<h3 id="verwendung_3">Verwendung</h3>
<pre><code class="cs">Bars.GetBar(DateTime time)
</code></pre>

<h3 id="weitere-informationen_3">Weitere Informationen</h3>
<p>zur Indizierung von Bars siehe <a href="#functionality"><em>Functionality</em></a>, <a href="#bars"><em>Bars</em></a></p>
<p>zur Benutzung von DateTime siehe <a href="http://msdn.microsoft.com/de-de/library/system.datetime.aspx">http://msdn.microsoft.com/de-de/library/system.datetime.aspx</a></p>
<h3 id="beispiel_3">Beispiel</h3>
<pre><code class="cs">Print (&quot;Der Schlusskurs für den 01.03.2012 um 18:00:00 Uhr war &quot; + Bars.GetBar(new DateTime(2012, 01, 03, 18, 0, 0)).Close);
</code></pre>

<h2 id="barsgetbarindex">Bars.GetBarIndex</h2>
<h3 id="beschreibung_4">Beschreibung</h3>
<p>Bars.GetBarIndex liefert den Index eines Bars. Übergeben werden kann der Methode entweder ein Bar-Objekt oder ein DateTime-Objekt.</p>
<p>Siehe <a href="#barsgetbar"><em>Bars.GetBar</em></a>(#barsgetbar), <a href="#barsgetbarsago"><em>Bars.GetBarsAgo</em></a>(#barsgetbarsago), <a href="#barsgetbyindex"><em>Bars.GetByIndex</em></a>(#barsgetbyindex).</p>
<h3 id="parameter_3">Parameter</h3>
<p>Typ IBar bar
oder
Typ DateTime</p>
<h3 id="ruckgabewert_4">Rückgabewert</h3>
<p>Typ int der zu dem übergebenen Bar-Objekt bzw. dem übergebenen DateTime-Objekt gehörende Bar-Index</p>
<h3 id="verwendung_4">Verwendung</h3>
<pre><code class="cs">Bars.GetBarIndex (IBar bar)
Bars.GetBarIndex (DateTime dt)
</code></pre>

<h3 id="weitere-informationen_4">Weitere Informationen</h3>
<p>zur Indizierung von Bars siehe <a href="#functionality"><em>Functionality</em></a>, <a href="#bars"><em>Bars</em></a></p>
<h3 id="beispiel_4">Beispiel</h3>
<pre><code class="cs">int barsAgo = 5;
IBar bar = Bars.GetBar(Time[barsAgo]);
Print(barsAgo + &quot; und &quot; + Bars.GetBarIndex(bar) + &quot; sind in diesem Beispiel gleich.&quot;);
</code></pre>

<h2 id="barsgetbarsago">Bars.GetBarsAgo</h2>
<h3 id="beschreibung_5">Beschreibung</h3>
<p>Bars.GetBarsAgo liefert den Index des ersten Bars (vom ältesten zum jüngsten), der dem übergebenen Datum bzw. der Uhrzeit entspricht.</p>
<p>Siehe auch:: <a href="#barsgetbar"><em>Bars.GetBar</em></a>, <a href="#barsgetbyindex"><em>Bars.GetByIndex</em></a>, <a href="#barsgetbarindex"><em>Bars.GetBarIndex</em></a>.</p>
<h3 id="parameter_4">Parameter</h3>
<p>Typ DateTime</p>
<h3 id="ruckgabewert_5">Rückgabewert</h3>
<p>Typ int Index des Bars, der dem Zeitstempel als erstes entspricht.</p>
<p>bei Zeitstempel älter als der älteste Bar: 0 (Null)
bei Zeitstempel jünger als der letzte Bar: Index des letzten Bars</p>
<h3 id="verwendung_5">Verwendung</h3>
<pre><code class="cs">Bars.GetBarsAgo(DateTime time)
</code></pre>

<h3 id="weitere-informationen_5">Weitere Informationen</h3>
<p>zur Indizierung von Bars siehe <a href="#functionality"><em>Functionality</em></a>, <a href="#bars"><em>Bars</em></a></p>
<p>zur Benutzung von DateTime siehe  <a href="http://msdn.microsoft.com/de-de/library/system.datetime.aspx">http://msdn.microsoft.com/de-de/library/system.datetime.aspx</a></p>
<h3 id="beispiel_5">Beispiel</h3>
<pre><code class="cs">Print(&quot;Der Bar für den 01.03.2012 um 18:00:00 Uhr hat den Index&quot; + Bars.GetBarsAgo(new DateTime(2012, 01, 03, 18, 0, 0)));
</code></pre>

<h2 id="barsgetbyindex">Bars.GetByIndex</h2>
<h3 id="beschreibung_6">Beschreibung</h3>
<p>Bars.GetByIndex liefert das zu einem übergebenen Index gehörende Bar-Objekt.</p>
<p>Siehe <a href="#barsgetbar"><em>Bars.GetBar</em></a>(#barsgetbar), <a href="#barsgetbarsago"><em>Bars.GetBarsAgo</em></a>(#barsgetbarsago), <a href="#barsgetbarindex"><em>Bars.GetBarIndex</em></a>(#barsgetindex).</p>
<h3 id="parameter_5">Parameter</h3>
<p>Typ int Index</p>
<h3 id="ruckgabewert_6">Rückgabewert</h3>
<p>Typ IBar Bar-Objekt zu dem übergebenen Index</p>
<h3 id="verwendung_6">Verwendung</h3>
<pre><code class="cs">Bars.GetByIndex (int Index)
</code></pre>

<h3 id="weitere-informationen_6">Weitere Informationen</h3>
<p>zur Indizierung von Bars siehe <a href="#functionality"><em>Functionality</em></a>, <a href="#bars"><em>Bars</em></a></p>
<h3 id="beispiel_6">Beispiel</h3>
<pre><code class="cs">Print(Close[0] + &quot; und &quot; + Bars.GetByIndex(ProcessingBarIndex).Close + &quot; sind in diesem Beispiel gleich.&quot;);
</code></pre>

<h2 id="barsgetclose">Bars.GetClose</h2>
<p>Bars.GetClose(int index) – siehe <a href="../barsgetopen"><em>Bars.GetOpen</em></a>.</p>
<h2 id="barsgethigh">Bars.GetHigh</h2>
<p>Bars.GetHigh(int index) – siehe <a href="../barsgetopen"><em>Bars.GetOpen</em></a>.</p>
<h2 id="barsgetlow">Bars.GetLow</h2>
<p>Bars.GetLow(int index) – siehe <a href="../barsgetopen"><em>Bars.GetOpen</em></a>.</p>
<h2 id="barsgetnextsessiontimespan">Bars.GetNextSessionTimeSpan</h2>
<h3 id="beschreibung_7">Beschreibung</h3>
<p>Bars.GetNextSessionTimeSpan liefert jeweils Datum und Uhrzeit von Beginn und Ende der nächsten Handelssitzung.</p>
<p>Siehe <a href="#barssessionbegin"><em>Bars.CurrentSessionBeginTime</em></a>, <a href="#barssessionend"><em>Bars.CurrentSessionEndTime</em></a>, <a href="#barssessionnextbegin"><em>Bars.NextSessionBeginTime</em></a>, <a href="#barssessionnextend"><em>Bars.NextSessionEndTime</em></a>.</p>
<h3 id="parameter_6">Parameter</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>DateTime</td>
<td>time</td>
<td>Datum bzw. Uhrzeit, für die die Daten der folgenden Handelssitzung gesucht werden</td>
</tr>
<tr>
<td>iBars</td>
<td>bars</td>
<td>Barobjekt, für das die Daten der folgenden Handelssitzung gesucht werden</td>
</tr>
<tr>
<td>int</td>
<td>barsago</td>
<td>Anzahl der Tage in der Vergangenheit, für die die Daten der folgenden Handelssitzung gesucht werden</td>
</tr>
</tbody>
</table>
<h3 id="ruckgabewert_7">Rückgabewert</h3>
<p>DateTime sessionBegin
DateTime sessionEnd</p>
<p><strong>Hinweis:</strong>
Das Datum von Beginn und Ende sind jeweils für eine Handelssitzung zusammengehörend. Wenn das übergebene Datum dem Ende-Datum der aktuellen Handelssitzung entspricht, kann das zurückgegebene Datum für den Beginn der Handelssitzung bereits in der Vergangenheit liegen.
Es wird in diesem Fall nicht das Datum der nächstfolgenden Handelssitzung zurückgegeben.</p>
<h3 id="verwendung_7">Verwendung</h3>
<pre><code class="cs">Bars.GetNextSessionTimeSpan(Bars bars, int barsAgo, out DateTime sessionBegin, out DateTime sessionEnd)
Bars.GetNextSessionTimeSpan(DateTime time, out DateTime sessionBegin, out DateTime sessionEnd)
</code></pre>

<h3 id="weitere-informationen_7">Weitere Informationen</h3>
<p>Die beiden Signaturen liefern nicht notwendigerweise auch die gleichen Ergebnisse.
Bei Verwendung der Bar-Signatur wird der ubergebene Bar daraufhin untersucht, zu welchem Session-Template er gehört. Beginn und Ende der nächsten Session werden dann diesem Template entnommen.</p>
<p>Bei Verwendung der Zeit-Signatur wierden Datum und Uhrzeit des übergebenen Bars genutzt, um die Daten der aktuellen und damit der folgenden Session zu berechnen.</p>
<p>Wenn bei Verwendung der Zeit-Signatur ein Zeitstempel übergeben wird, der exakt einer Beginn bzw. Endezeit einer Session entspricht, werden Beginn und Ende der davorliegenden Session zurückgegeben, d.h. der Zeitstempel wird als "in der Session enthalten" angesehen, selbst wenn der fragliche Bar bereits in einer neuen Session enthalten ist. Um dieses Verhaten sicher auszuschließen, ist die Verwendung der Bar-Signatur empfohlen.</p>
<p>zur Benutzung von DateTime siehe <a href="http://msdn.microsoft.com/de-de/library/system.datetime.aspx"><em>http://msdn.microsoft.com/de-de/library/system.datetime.aspx</em></a></p>
<h3 id="beispiel_7">Beispiel</h3>
<pre><code class="cs">DateTime sessionBegin;
DateTime sessionEnd;
protected override void OnCalculate()
{
Bars.GetNextSessionTimeSpan(Bars, 0, out sessionBegin, out sessionEnd);
Print(&quot;Session Start: &quot; + sessionBegin + &quot; Session End: &quot; + sessionEnd);
}
</code></pre>

<h2 id="barsgetopen">Bars.GetOpen</h2>
<h3 id="beschreibung_8">Beschreibung</h3>
<p>Die folgenden Methoden sind aus Gründen der Kompatibilität vorhanden.</p>
<ul>
<li>Bars.GetOpen(int index) liefert das Open des mit &lt;index&gt; referenzierten Bars.</li>
<li>Bars.GetHigh(int index) liefert das High des mit &lt;index&gt; referenzierten Bars..</li>
<li>Bars.GetLow(int index) liefert das Low des mit &lt;index&gt; referenzierten Bars.</li>
<li>Bars.GetClose(int index) liefert das Close des mit &lt;index&gt; referenzierten Bars.</li>
<li>Bars.GetTime(int index) liefert das Zeitstempel des mit &lt;index&gt; referenzierten Bars.</li>
<li>Bars.GetVolume(int index) liefert das Volumen des mit &lt;index&gt; referenzierten Bars.</li>
</ul>
<p><strong>Achtung</strong>: Die Indizierung weicht von der sonst verwendeten <a href="#indexing"><em>Indexing</em></a>, <a href="#bars"><em>Bars</em></a> ab.
Hier beginnt die Indizierung mit 0 am ältesten Bar (links im Chart) und endet mit dem jüngsten Bar rechts im Chart  (=Bars.Count-1).</p>
<p>Die Indizierungen können leicht (in beiden Richtungen!) wie folgt umgerechnet werden:</p>
<pre><code class="cs">private int Convert(int idx)
{
return Math.Max(0,Bars.Count-idx-1-(CalculateOnClosedBar?1:0));
}
</code></pre>

<h3 id="parameter_7">Parameter</h3>
<p>int index (0 .. Bars.Count-1)</p>
<h3 id="ruckgabewert_8">Rückgabewert</h3>
<p>Typ double für GetOpen, GetHigh, GetLow, GetClose und GetVolume</p>
<p>Typ DateTime für GetTime</p>
<h2 id="barsgetsessionbegin">Bars.GetSessionBegin</h2>
<h3 id="beschreibung_9">Beschreibung</h3>
<p>Bars.GetSessionBegin liefert das Datum und die Uhrzeit des Beginns einer bestimmten Handelssitzung.
Datum und Uhrzeit für den Beginn der aktuellen Handelssitzung werden auch dann korrekt angegeben, wenn die Funktion von einem Bar in der Vergangenheit aufgerufen wird.
Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_8">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_9">Rückgabewert</h3>
<p>Typ DateTime</p>
<h3 id="verwendung_8">Verwendung</h3>
<p>Bars.GetSessionBegin(DateTime dt)</p>
<h3 id="weitere-informationen_8">Weitere Informationen</h3>
<p>Die Uhrzeit des zurückgegebenen Wertes entspricht der im MarketEscort angegebenen Startzeit der Handelssitzung des jeweiligen Handelsplatzes. Der für den Wert verwendete Handelsplatz wird im Instrumet Escort eingestellt und kann in AgenaSript mit der Funktion Instrument.Exchange ermittelt werden.</p>
<p><img alt="Bars.CurrentSessionBeginTime" src="../media/image3.png" /></p>
<h3 id="beispiel_8">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die Handelssitzung am 25.03.2015 hat um &quot;+ Bars.GetSessionBegin(new DateTime(2015, 03, 25)) + &quot; begonnen.&quot;);
}
</code></pre>

<h2 id="barsgettime">Bars.GetTime</h2>
<p>Bars.GetTime(int index) – siehe <a href="../barsgetopen"><em>Bars.GetOpen</em></a>.</p>
<h2 id="barsgetvolume">Bars.GetVolume</h2>
<p>Bars.GetVolume(int index) – siehe <a href="../barsgetopen"><em>Bars.GetOpen</em></a>.</p>
<h2 id="barsinstrument">Bars.Instrument</h2>
<h3 id="beschreibung_10">Beschreibung</h3>
<p>Bars.Instrument liefert ein Instrument-Objekt, für das im Chart dargestellte Handelsinstrument.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_9">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_10">Rückgabewert</h3>
<p>Typ Instrument</p>
<h3 id="verwendung_9">Verwendung</h3>
<p>Bars.Instrument</p>
<h3 id="weitere-informationen_9">Weitere Informationen</h3>
<p>Für weitere Informationen zu Handelsinstrumenten siehe unter  <a href="#instrument"><em>Instrument</em></a>.</p>
<h3 id="beispiel_9">Beispiel</h3>
<pre><code class="cs">// beide Ausgaben liefern das gleiche Ergebnis
Print(&quot;Das aktuell dargestellte Handelsinstrument hat das Symbol &quot; + Bars.Instrument);
Instrument i = Bars.Instrument;
Print(&quot;Das aktuell dargestellte Handelsinstrument hat das Symbol &quot; + i.Symbol);
</code></pre>

<h2 id="barsiseod">Bars.IsEod</h2>
<h3 id="beschreibung_11">Beschreibung</h3>
<p>Mit Bars.IsEod kann überprüft werden, ob es sich um End-of-Day-Bars handelt.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_10">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_11">Rückgabewert</h3>
<p>Typ bool</p>
<h3 id="verwendung_10">Verwendung</h3>
<p>Bars.IsEod</p>
<h3 id="more-information">More Information</h3>
<p>Innerhalb von  <a href="#oncalculate"><em>OnCalculate()</em></a>kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von  OnCalculate ()verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit  if (bars! = Null) ausgeführt werden.</p>
<h3 id="beispiel_10">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die Bars sind Eod: &quot; + Bars.IsEod);
</code></pre>

<h2 id="barsisfalling">Bars.IsFalling</h2>
<h3 id="beschreibung_12">Beschreibung</h3>
<p>Bar-Eigenschaften, die verwendet werden, wenn Bar herunterfällt.</p>
<h3 id="parameter_11">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_12">Rückgabewert</h3>
<p>keine</p>
<h3 id="beispiel_11">Beispiel</h3>
<pre><code class="cs">Bars[0].IsFalling;
</code></pre>

<h2 id="barsisfirstbarinsession">Bars.IsFirstBarInSession</h2>
<h3 id="beschreibung_13">Beschreibung</h3>
<p>Mit Bars.IsFirstBarInSession kann festgestellt werden, ob der aktuelle Bar der erste Bar einer Handelssitzung ist.</p>
<p>Siehe auch weitere  <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="ruckgabewert_13">Rückgabewert</h3>
<p>Typ bool</p>
<p><strong>true</strong>: Der Bar ist der erste Bar einer Handelssitzung
<strong>false</strong>: Der Bar ist nicht der erste Bar einer Handelssitzung</p>
<h3 id="verwendung_11">Verwendung</h3>
<p>Bars.IsFirstBarInSession</p>
<h3 id="weitere-informationen_10">Weitere Informationen</h3>
<p>Innerhalb von <em>OnCalculate()</em> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.
Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit if (Bars != null) ausgeführt werden.</p>
<h3 id="beispiel_12">Beispiel</h3>
<pre><code class="cs">if (Bars.IsFirstBarInSession)
Print (&quot;Die aktuelle Handelsitzung hat um&quot; + Time [0]);
</code></pre>

<h2 id="barsisgrowing">Bars.isGrowing</h2>
<h3 id="beschreibung_14">Beschreibung</h3>
<p>Bar-Eigenschaften verwendet, wenn Bar aufwächst.</p>
<h3 id="parameter_12">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_14">Rückgabewert</h3>
<p>keine</p>
<h3 id="beispiel_13">Beispiel</h3>
<pre><code class="cs">Bars[0].isGrowing;
</code></pre>

<h2 id="barsisintraday">Bars.IsIntraday</h2>
<h3 id="beschreibung_15">Beschreibung</h3>
<p>Mit Bars.IsIntraday kann überprüft werden, ob es sich um reine Intraday-Bars handelt. Entweder mit Berücksichtigung von Ticks - Bars.IsIntraday.</p>
<h3 id="ruckgabewert_15">Rückgabewert</h3>
<p><strong>bool</strong></p>
<p>Er gibt "true" zurück, wenn TimeFrame intra-day (z. B. 1 min, 15 min, 1 h usw.) und "false" in anderen Fällen ist.</p>
<h3 id="verwendung_12">Verwendung</h3>
<pre><code class="cs">Bars.IsIntraday
</code></pre>

<h3 id="beispiel_14">Beispiel</h3>
<pre><code class="cs">if(Bars.IsIntraday) {
    Print(&quot;TimeFrame is Intraday.&quot;);
} else {
    Print(&quot;TimeFrame is not Intraday.&quot;);
}
</code></pre>

<h2 id="barsisntb">Bars.IsNtb</h2>
<h3 id="beschreibung_16">Beschreibung</h3>
<p>Mit Bars.IsNtb kann überprüft werden, ob es sich um Not-Time-Based-Bars handelt. Bei Ntb-Bars handelt es sich beispielsweise um Point &amp; Figure oder Renko Charts.
Siehe auch weitere  <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_13">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_16">Rückgabewert</h3>
<p>Typ bool</p>
<h3 id="verwendung_13">Verwendung</h3>
<p>Bars.IsNtb</p>
<h3 id="weitere-informationen_11">Weitere Informationen</h3>
<p>Innerhalb von <a href="#oncalculate"><em>OnCalculate()</em></a> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.
Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit if (Bars != null) ausgeführt werden.</p>
<h3 id="beispiel_15">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die angezeigten Bars sind Ntb:&quot; + Bars.IsNtb);
</code></pre>

<h2 id="barsissessionbreak">Bars.IsSessionBreak</h2>
<h3 id="beschreibung_17">Beschreibung</h3>
<p>Mit Bars.IsSessionBreak kann ermittelt werden, ob die Bars innerhalb der laufenden Handelssitzung in den im Marktplatz-Escort definierten Handelspausen liegen.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_14">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_17">Rückgabewert</h3>
<p>Typ bool</p>
<h3 id="verwendung_14">Verwendung</h3>
<p>Bars.IsSessionBreak</p>
<h3 id="weitere-informationen_12">Weitere Informationen</h3>
<p><img alt="Bars.CurrentSessionEndTime" src="../media/image4.png" /></p>
<h3 id="beispiel_16">Beispiel</h3>
<pre><code class="cs">if (Bars.IsSessionBreak)
{
Print(&quot;Die Börse Xetra hat gerade eine Handelspause&quot;&quot;);
}
</code></pre>

<h2 id="barslastbarcompleteness">Bars.LastBarCompleteness</h2>
<h3 id="beschreibung_18">Beschreibung</h3>
<p>Bars.LastBarCompleteness liefert einen Wert, der angibt, zu wieviel Prozent ein Bar bereits fertiggestellt ist. Ein Bar in der Zeiteinheit 10 Minuten ist z.B. nach 5 Minuten genau zu 50% fertig.</p>
<p>Für nicht-zeitbasierte Chartarten (Kagi, LineBreak, Renko, Range, P&amp;F usw.) und während eines Backtests liefert die Eigenschaft immer eine 0.</p>
<h3 id="ruckgabewert_18">Rückgabewert</h3>
<p><strong>double</strong></p>
<p>als Prozentwert, d.h. für 30% wird 0.3 zurückgegeben-</p>
<h3 id="verwendung_15">Verwendung</h3>
<p>Bars.LastBarCompleteness</p>
<h3 id="weitere-informationen_13">Weitere Informationen</h3>
<p>Innerhalb von <a href="#oncalculate"><em>OnCalculate()</em></a> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit if (Bars != null) ausgeführt werden.</p>
<h3 id="beispiel_17">Beispiel</h3>
<pre><code class="cs">// Ein 60 Min. Chart wird intraday beobachtet.
// Jeweils 5 Min. bevor der aktuelle Bar schließt,
// soll ein akustisches Signal ausgegeben werden.
// 55 Min. entsprechen 92%

bool remind = false;
protected override void OnCalculate()
{
if (FirstTickOfBar) remind = true;
if (remind &amp;&amp; Bars.LastBarCompleteness &gt;= 0.92)
{
remind = false;
PlaySound(&quot;Alert1&quot;);
}
}
</code></pre>

<h2 id="barsnextsessionbegintime">Bars.NextSessionBeginTime</h2>
<h3 id="beschreibung_19">Beschreibung</h3>
<p>Bars.NextSessionBeginTime liefert das Datum und die Uhrzeit des Beginns der auf die aktuell laufende Handelssitzung folgenden Sitzung.
Datum und Uhrzeit für den Beginn der nächsten Handelssitzung werden auch dann korrekt angegeben, wenn die Funktion von einem Bar in der Vergangenheit aufgerufen wird.</p>
<h3 id="parameter_15">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_19">Rückgabewert</h3>
<p>Typ DateTime</p>
<h3 id="verwendung_16">Verwendung</h3>
<p>Bars.GetSessionNextBegin</p>
<h3 id="weitere-informationen_14">Weitere Informationen</h3>
<p>Die Uhrzeit des zurückgegebenen Wertes entspricht der im MarketEscort angegebenen Startzeit der Handelssitzung des jeweiligen Handelsplatzes. Der für den Wert verwendete Handelsplatz wird im Instrumet Escort eingestellt und kann in AgenaSript mit der Funktion <a href="#instrumentexchange"><em>Instrument.Exchange</em></a> ermittelt werden.</p>
<p><img alt="Bars.NextSessionBeginTime" src="../media/image3.png" /></p>
<h3 id="beispiel_18">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die nächste Handelssitzung beginnt um &quot; + Bars.NextSessionBeginTime);
</code></pre>

<h2 id="barsnextsessionendtime">Bars.NextSessionEndTime</h2>
<h3 id="beschreibung_20">Beschreibung</h3>
<p>Bars.NextSessionEndTime liefert das Datum und die Uhrzeit für das Ende der auf die aktuell laufende Handelssitzung folgenden Sitzung.
Datum und Uhrzeit für das Ende der nächsten Handelssitzung werden auch dann korrekt angegeben, wenn die Funktion von einem Bar in der Vergangenheit aufgerufen wird.
Siehe auch weitere  <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_16">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_20">Rückgabewert</h3>
<p>Typ DateTime</p>
<h3 id="verwendung_17">Verwendung</h3>
<p>Bars.GetSessionNextEnd</p>
<h3 id="weitere-informationen_15">Weitere Informationen</h3>
<p>Die Uhrzeit des zurückgegebenen Wertes entspricht der im MarketEscort angegebenen Endezeit der Handelssitzung des jeweiligen Handelsplatzes. Der für den Wert verwendete Handelsplatz wird im Instrumet Escort eingestellt und kann in AgenaSript mit der Funktion <a href="#instrumentexchange"><em>Instrument.Exchange</em></a> ermittelt werden.</p>
<p><img alt="Bars.NextSessionEndTime" src="../media/image4.png" /></p>
<h3 id="beispiel_19">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die nächste Handelssitzung endet um &quot; + Bars.NextSessionEndTime);
</code></pre>

<h2 id="barstailbottom">Bars.TailBottom</h2>
<h3 id="beschreibung_21">Beschreibung</h3>
<p>Mit dieser Eigenschaft ist es möglich die Höhe des unteren Dochtes der Kerze zu ermitteln.</p>
<h3 id="parameter_17">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_21">Rückgabewert</h3>
<p>keine</p>
<h3 id="verwendung_18">Verwendung</h3>
<pre><code class="cs">Bars[0].TailBottom;
</code></pre>

<h3 id="beispiel_20">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die Höhe des unteren Dochtes ist: &quot; + Bars.TailBottom);
</code></pre>

<h2 id="barstailtop">Bars.TailTop</h2>
<h3 id="beschreibung_22">Beschreibung</h3>
<p>Mit dieser Eigenschaft ist es möglich die Höhe des oberen Dochtes der Kerze zu ermitteln.</p>
<h3 id="parameter_18">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_22">Rückgabewert</h3>
<p>keine</p>
<h3 id="verwendung_19">Verwendung</h3>
<pre><code class="cs">Bars[0].TailTop;
</code></pre>

<h3 id="beispiel_21">Beispiel</h3>
<pre><code class="cs">Print(&quot;Die Höhe des oberen Dochtes ist: &quot; + Bars.TailTop);
</code></pre>

<h2 id="barstickscountforlastbar">Bars.TicksCountForLastBar</h2>
<h3 id="beschreibung_23">Beschreibung</h3>
<p>Bars.TicksCountForLastBar liefert die Gesamtanzahl der in einem Bar enthaltenen Ticks.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_19">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_23">Rückgabewert</h3>
<p>Typ int</p>
<h3 id="verwendung_20">Verwendung</h3>
<p>Bars.TicksCountForLastBar</p>
<h3 id="weitere-informationen_16">Weitere Informationen</h3>
<p>Innerhalb von <a href="#oncalculate"><em>OnCalculate()</em></a> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit <em>if</em> (Bars != <em>null</em>) ausgeführt werden.</p>
<h3 id="beispiel_22">Beispiel</h3>
<pre><code class="cs">Print(&quot;Der aktuelle Bar besteht aus &quot; + Bars.TicksCountForLastBar + &quot; Ticks.&quot;);
</code></pre>

<h2 id="barstickscountintotal">Bars.TicksCountInTotal</h2>
<h3 id="beschreibung_24">Beschreibung</h3>
<p>Bars.TicksCountInTotal  liefert die Gesamtzahl aller Ticks von dem Moment an, von dem die Funktion aufgerufen wird.</p>
<p>Siehe auch weitere  <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_20">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_24">Rückgabewert</h3>
<p>Typ int</p>
<h3 id="verwendung_21">Verwendung</h3>
<p>Bars.TicksCountInTotal</p>
<h3 id="weitere-informationen_17">Weitere Informationen</h3>
<p>Der Datentyp int hat einen positiven Wertebereich von 2147483647. Wenn 10 Ticks je Sekunde angenommen werden, gibt es auch nach 2 Handelsmonaten bei einem 24h-Handel noch kein Überlauf.</p>
<p>Innerhalb von <a href="#oncalculate"><em>OnCalculate()</em></a>kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit <em>if</em> (Bars != <em>null</em>) ausgeführt werden.</p>
<h3 id="beispiel_23">Beispiel</h3>
<pre><code class="cs">//Anwendung in einem 30 Minuten Chart
Print(&quot;Die Gesamtanzahl der gelieferten Ticks in diesem Wert beträgt &quot; + Bars.TicksCountInTotal);
</code></pre>

<h2 id="barstimeframe">Bars.TimeFrame</h2>
<h3 id="beschreibung_25">Beschreibung</h3>
<p>Bars.TimeFrame liefert ein TimeFrame-Objekt, das Informationen zum aktuell verwendeten Zeiteinheit enthält.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="parameter_21">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_25">Rückgabewert</h3>
<p>Typ ITimeFrame</p>
<h3 id="verwendung_22">Verwendung</h3>
<p>Bars.TimeFrame</p>
<h3 id="weitere-informationen_18">Weitere Informationen</h3>
<p>Für weitere Informationen zum TimeFrame-Objekt siehe unter <a href="#timeframe"><em>TimeFrame</em></a>.</p>
<p>Innerhalb von <a href="#oncalculate"><em>OnCalculate()</em></a> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von OnCalculate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit  <em>if</em> (Bars != <em>null</em>) ausgeführt werden.</p>
<h3 id="beispiel_24">Beispiel</h3>
<pre><code class="cs">//Anwendung in einem 30 Minuten Chart
TimeFrame tf = (TimeFrame) Bars.TimeFrame;
Print(Bars.TimeFrame); //liefert &quot;30 Min&quot;
Print(tf.Periodicity); // liefert &quot;Minute&quot;
Print(tf.PeriodicityValue); // liefert &quot;30&quot;
</code></pre>

<h2 id="barscountforsession">BarsCountForSession</h2>
<h3 id="beschreibung_26">Beschreibung</h3>
<p>Bars.BarsCountForSession liefert die Anzahl der Bars, die seit dem Beginn der aktuellen Handelssitzung entstanden sind.</p>
<p>Siehe auch weitere <a href="#properties"><em>Properties</em></a> von Bars.</p>
<h3 id="ruckgabewert_26">Rückgabewert</h3>
<p>Typ int Anzahl der Bars</p>
<p>Ein Wert von -1 deutet auf ein Problem bei der Ermittlung des Sessionbeginns hin.</p>
<h3 id="verwendung_23">Verwendung</h3>
<p>Bars.BarsCountForSession</p>
<h3 id="weitere-informationen_19">Weitere Informationen</h3>
<p>Innerhalb von <em>OnCalculate()</em> kann diese Eigenschaft verwendet werden, ohne vorher auf Null-Reference testen zu müssen. Sobald die Methode OnCalculate() von AgenaScript aufgerufen wird, ist immer auch ein Bars Objekt vorhanden.</p>
<p>Falls diese Eigenschaft ausserhalb von OnBarUpdate() verwendet wird, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit  <em>if</em> (Bars!= <em>null</em>)  ausgeführt werden.</p>
<h3 id="beispiel_25">Beispiel</h3>
<pre><code class="cs">Print (&quot;Seit dem Start der letzten Handelssitzung sind&quot; + Bars.BarsCountForSession + &quot;Bars entstanden.&quot;);
</code></pre>

<h2 id="processingbarseriesindex">ProcessingBarSeriesIndex</h2>
<h3 id="beschreibung_27">Beschreibung</h3>
<p>Gibt an, ob der aktuelle Bar zuletzt berechnet wurde.</p>
<h3 id="parameter_22">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_27">Rückgabewert</h3>
<p>Typ bool</p>
<h3 id="verwendung_24">Verwendung</h3>
<p>ProcessingBarSeriesIndex</p>
<h3 id="weitere-informationen_20">Weitere Informationen</h3>
<p>Verwendet für komplizierte Berechnung auf einem letzten Bar</p>
<h3 id="beispiel_26">Beispiel</h3>
<pre><code class="cs">protected override void OnCalculate()
        {
            base.OnCalculate();
            if (!IsProcessingBarIndexLast)
                return;
            bool isUpdated;
}
</code></pre>

<h2 id="collections">Collections</h2>
<h2 id="chartdrawings">ChartDrawings</h2>
<h3 id="beschreibung_28">Beschreibung</h3>
<p>ChartDrawings  ist eine Collection, die alle Zeichenobjekte im Chart enthält. In ChartDrawings werden sowohl dem Chart manuell hinzugefügte Zeichenobjekte, als auch von einem Script gezeichnete Objekte aufgenommen.</p>
<p>Der Index für ChartDrawings ist der eindeutige Name der Zeichenobjekte (string tag).</p>
<h3 id="verwendung_25">Verwendung</h3>
<p>ChartDrawings [string tag]</p>
<h3 id="beispiele">Beispiele</h3>
<p><strong>Hinweis:</strong>  Um die Interface-Definitionen nutzen zu können, muß in den Using-Anweisungen</p>
<pre><code class="cs">using AgenaTrader.Plugins;
// Anzahl der Zeichenobjekte auf dem Chart und deren Tags ausgeben
Print(&quot;Auf dem Chart befinden sich  &quot; + ChartDrawings.Count + &quot; Zeichenobjekte&quot;);
foreach (IDrawObject draw in ChartDrawings) Print(draw.Tag);
//Eine schwarze Trendlinie zeichnen ...
AddChartLine(&quot;MyLine&quot;, true, 10, Close[10], 0, Close[0], Color.Black, DashStyle.Solid, 3);
/ ... und die Farbe auf Rot ändern
ITrendLine line = (ITrendLine) ChartDrawings[&quot;MyLine&quot;];
if (line != null) line.Pen.Color = Color.Red;
// alle vertikalen Linien in Chart auf Linienstärke 3 setzen,
// und nicht verschiebbar und nicht editierbar machen
foreach (IDrawObject draw in ChartDrawings)
if (draw is IVerticalLine)
{
IVerticalLine vline = (IVerticalLine) draw;
vline.IsLocked = true;
vline.Editable = false;
vline.Pen.Width = 3;
}
</code></pre>

<h2 id="inseries">InSeries</h2>
<h3 id="beschreibung_29">Beschreibung</h3>
<p>InSeries ist ein  <a href="#datenserien"><em>DatenSerien</em></a> Objekt, in dem die Eingangsdaten für einen Indikator bzw. eine Strategie enthalten sind.</p>
<p>Wird ein Indikator ohne explizite Angabe von Eingangsdaten aufgerufen, wird immer der Schlusskurs (Close) der aktuell im Chart geladenen Kursdaten verwendet.</p>
<p>Bei einem Aufruf von SMA(20) wird der gl. Durchschnitt auf die Schlusskurse der aktuellen Chart-Kursdaten berechnet (dies entspricht SMA(Close, 20).</p>
<p>InSeries[0] = Close[0].</p>
<p>Bei dem Aufruf von SMA(High, 20) werden die Höchstkurse der geladenen Daten für die Berechnung des gl. Durchschnitts verwendet.</p>
<p>InSeries[0] = High[0].</p>
<p>So kann jede beliebige Datenreihe als Input für einen Indikator verwendet werden.</p>
<p><strong>double</strong> d = <strong>RSI</strong>(<strong>SMA</strong>(20), 14, 3)[0]; berechnet beispielsweise den 14-Perioden-RSI über die SMA(20) Werte als Eingangsdatenreihe.
InSeries[0] = SMA(20)[0].</p>
<h3 id="verwendung_26">Verwendung</h3>
<pre><code class="cs">InSeries
InSeries[int barsAgo]
</code></pre>

<h3 id="beispiele_1">Beispiele</h3>
<pre><code class="cs">Print(&quot;Die Eingangsdaten für den Indikator sind &quot; + InSeries[0]);
</code></pre>

<h2 id="lines">Lines</h2>
<h3 id="beschreibung_30">Beschreibung</h3>
<p>Lines ist eine Collection, die die  <a href="#levelline"><em>LevelLine</em></a> Objekte eines Indikators enthält.</p>
<p>Wenn einem Indikator mit der <a href="#add"><em>Add()</em></a> Methode ein Line-Objekt hinzugefügt wird, wird dieses automatisch der Collection Lines hinzugefügt.</p>
<p>Die Reihenfolge der Add-Befehle bestimmt dabei auch die Sortierung in Lines. Der erste Aufruf von Add() erzeugt Lines[0], der nächste Lines[1] usw.</p>
<p>Siehe auch <a href="#plots"><em>Plots</em></a>.</p>
<h3 id="verwendung_27">Verwendung</h3>
<pre><code class="cs">Lines[int index]
</code></pre>

<h3 id="beispiele_2">Beispiele</h3>
<pre><code class="cs">// Add &quot;using System.Drawing.Drawing2D;&quot; for DashStyle
protected override void OnInit()
{
Add(new LevelLine(Color.Blue, 70, &quot;Upper&quot;)); // gespeichert in Lines[0]
Add(new LevelLine(Color.Blue, 30, &quot;Lower&quot;)); // gespeichert in Lines[1]
}
protected override void OnCalculate()
{
// Wenn RSI über 70, Eigenschaften der Linie ändern
if (RSI(14 ,3) &gt;= 70)
{
Lines[0].Width = 3;
Lines[0].Color = Color.Red;
Lines[0].DashStyle = DashStyle.Dot;
}
else
{
Lines[0].Width = 1;
Lines[0].Color = Color.Blue;
Lines[0].DashStyle = DashStyle.Solid;
}
}
</code></pre>

<h2 id="plotcolors">PlotColors</h2>
<h3 id="beschreibung_31">Beschreibung</h3>
<p>PlotColors ist eine Collection, die die ColorSeries aller Plot-Objekte enthält.</p>
<p>Wenn einem Indikator mit der <a href="#add"><em>Add()</em></a> Methode ein Plot hinzugefügt wird, wird automatisch auch ein ColorSeries-Objekt erzeugt und der Collection PlotColors hinzugefügt.</p>
<p>Die Reihenfolge der Add-Befehle bestimmt dabei auch die Sortierung in PlotColors. Der erste Aufruf von Add() erzeugt PlotColors[0], der nächste PlotColors[1] usw.</p>
<h3 id="verwendung_28">Verwendung</h3>
<pre><code class="cs">PlotColors[int PlotIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_21">Weitere Informationen</h3>
<p>Informationen zur Klasse Collection:
<a href="http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.80%29.aspx"><em>http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.80%29.aspx</em></a></p>
<h3 id="beispiel_27">Beispiel</h3>
<pre><code class="cs">using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using AgenaTrader.API;
namespace AgenaTrader.UserCode
{
[Description(&quot;PlotColor Demo&quot;)]
public class PlotColorsDemo : UserIndicator
{
public DataSeries SMA20 { get {return Outputs[0];} }
public DataSeries SMA50 { get {return Outputs[1];} }
public DataSeries SMA100 { get {return Outputs[2];} }
private Pen pen;
protected override void OnInit()
{
// Linienstärke (Width) auf 4 einstellen
pen = new Pen(Color.Empty, 4);
 // Dem Chart drei Plots mit der def. Linienstärke hinzufügen
Add(new OnPaint(pen, PlotStyle.LevelLine, &quot;SMA20&quot; )); //attached to PlotColors[0]
Add(new OnPaint(pen, PlotStyle.LevelLine, &quot;SMA50&quot; )); //attached to PlotColors[1]
Add(new OnPaint(pen, PlotStyle.LevelLine, &quot;SMA100&quot;)); //attached to PlotColors[2]
IsOverlay = true;
}
protected override void OnCalculate()
{
 // Den drei Plots Werte zuweisen
SMA20.Set (SMA(20) [0]);
SMA50.Set (SMA(50) [0]);
SMA100.Set(SMA(100)[0]);
// Farben je nach Kursverlauf ändern
if (IsSerieRising(Close))
{
PlotColors[0][0] = Color.LightGreen;
PlotColors[1][0] = Color.Green;
PlotColors[2][0] = Color.DarkGreen;
}
else if (IsSerieFalling(Close))
{
PlotColors[0][0] = Color.LightSalmon;
PlotColors[1][0] = Color.Red;
PlotColors[2][0] = Color.DarkRed;
}
else
{
PlotColors[0][0] = Color.LightGray;
PlotColors[1][0] = Color.Gray;
PlotColors[2][0] = Color.DarkGray;
}
}
}
}
</code></pre>

<h2 id="plots">Plots</h2>
<h3 id="beschreibung_32">Beschreibung</h3>
<p>Plots ist eine Collection, die die Plot-Objekte eines Indikators enthält.</p>
<p>Wenn einem Indikator mit der Add()-Methode ein Plot-Objekt hinzugefügt wird, wird dieses automatisch der Collection Plots hinzugefügt.</p>
<p>Die Reihenfolge der Add-Befehle bestimmt dabei auch die Sortierung in Plots. Der erste Aufruf von Add() erzeugt Plots[0], der nächste Plots[1]\ usw.</p>
<p>Siehe auch <a href="#lines"><em>Lines</em></a>.</p>
<h3 id="verwendung_29">Verwendung</h3>
<pre><code class="cs">Plots[int index]
</code></pre>

<h3 id="beispiele_3">Beispiele</h3>
<pre><code class="cs">protected override void OnInit()
{
Add(new OnPaint(Color.Blue, &quot;MySMA 20&quot;)); // saved to Plots[0]
}
protected override void OnCalculate()
{
Value.Set(SMA(20)[0]);
// Wenn Kurs über SMA, Plot grün färben, sonst rot
if (Close[0] &gt; SMA(20)[0])
    Plots[0].PlotColor = Color.Green;
else
    Plots[0].PlotColor = Color.Red;
}
</code></pre>

<h2 id="values">Values</h2>
<h3 id="beschreibung_33">Beschreibung</h3>
<p>Values ist eine Collection, die die DataSeries-Objekte eines Indikators enthält.</p>
<p>Wenn einem Indikator mit der Add()-Methode ein Plot hinzugefügt wird, wird automatisch auch ein Value-Objekt erzeugt und der Collection Values hinzugefügt.</p>
<p>Die Reihenfolge der Add-Befehle bestimmt dabei auch die Sortierung in Values. Der erste Aufruf von Add() erzeugt Values[0], der nächste Values[1] usw.</p>
<p><strong>Value</strong> ist immer identisch mit Values[0].</p>
<h3 id="verwendung_30">Verwendung</h3>
<pre><code class="cs">Outputs[int index]
Outputs[int index][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_22">Weitere Informationen</h3>
<p>Die für eine Collection bekannten Methoden Set(), Reset() und Count() sind auf Value bzw. Values anwendbar.</p>
<p>Informationen zur Klasse Collection:
<a href="http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.80%29.aspx"><em>http://msdn.microsoft.com/en-us/library/ybcx56wz%28v=vs.80%29.aspx</em></a></p>
<h3 id="beispiel_28">Beispiel</h3>
<pre><code class="cs">// Überpüfung des zweiten Indikatorwertes (d.h. der sekundären DatenSerie)
// von vor einem Bar
// und in Abhängigkeit davon Setzen des aktuellen Indikatorwertes
if (Outputs[1][1] &lt; High[0] - Low[0])
Value.Set(High[0] - Low[0]);
else
Value.Set(High[0] - Close[0]);
</code></pre>

<h2 id="data-series">Data Series</h2>
<h3 id="beschreibung_34">Beschreibung</h3>
<p>Datenserien werden in AgenaTrader zum einen unterschieden in die frei für die eigene Programmierung verwendbaren Datenserien zum Speichern von Werten unterschiedlicher Datentypen und zum anderen in die in AgenaTrader fest integrierten Datenserien, die die Kursdaten der einzelnen Bars enthalten. Die letzteren werden hier vorgestellt.
Das Konzept von Datenserien wird sehr konsequent und durchgängig verfolgt. Alle Kursdaten der einzelnen Bars sind in Datenserien organisiert.
Folgende Datenserien sind verfügbar:</p>
<p><a href="#open"><em>Open</em></a> <a href="#opens"><em>Opens</em></a></p>
<p><a href="#high"><em>High</em></a> <a href="#highs"><em>Highs</em></a></p>
<p><a href="#low"><em>Low</em></a>(#low) <a href="#lows"><em>Lows</em></a></p>
<p><a href="#close"><em>Close</em></a> <a href="#closes"><em>Closes</em></a></p>
<p><a href="#median"><em>Median</em></a> <a href="#medians"><em>Medians</em></a></p>
<p><a href="#typical"><em>Typical</em></a>(#Typical) <a href="#typicals"><em>Typicals</em></a></p>
<p><a href="#weighted"><em>Weighted</em></a>(#weighted) <a href="#weighteds"><em>Weighteds</em></a></p>
<p><a href="#time"><em>Time</em></a> <a href="#times"><em>Times</em></a></p>
<p><a href="#timeframe"><em>TimeFrame</em></a> <a href="#timeframes"><em>TimeFrames</em></a></p>
<p><a href="#volume"><em>Volume</em></a> <a href="#volumes"><em>Volumes</em></a></p>
<h2 id="open">Open</h2>
<h3 id="beschreibung_35">Beschreibung</h3>
<p>Open ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>,  in der die historischen Eröffnungskurse gespeichert sind.</p>
<h3 id="parameter_23">Parameter</h3>
<p>BarsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_31">Verwendung</h3>
<pre><code class="cs">Open
Open[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_23">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_29">Beispiel</h3>
<pre><code class="cs">// Eröffnungskurs der aktuellen Periode
Print(Time[0] + &quot; &quot; + Open[0]);
// Eröffnungskurs des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Open[5]);
// aktueller Wert für den SMA 14 über die Eröffnungskurse (gerundet)
Print(&quot;SMA(14) calculated using the opening prices: &quot; + Instrument.Round2TickSize(SMA(Open, 14)[0]));
</code></pre>

<h2 id="opens">Opens</h2>
<h3 id="beschreibung_36">Beschreibung</h3>
<p>Opens ist ein Array von Datenserien, welches alle Open-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge:</p>
<p>Opens[0] die Open-Dataseries der Chart-Zeiteinheit
Opens[1] die Open-Dataseries aller Bars auf Tagesbasis
Opens[2] die Open-Dataseries aller Bars auf Wochenbasis.</p>
<p>Opens[0][0] entspricht Open[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a></p>
<h3 id="parameter_24">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries (s. <a href="#bars"><em>Bars</em></a>)
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_32">Verwendung</h3>
<pre><code class="cs">Opens[int barSeriesIndex]
Opens[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_24">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_30">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="high">High</h2>
<h3 id="description">Description</h3>
<p>High ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>, in der die historischen Höchstkurse gespeichert sind.</p>
<h3 id="parameter_25">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_33">Verwendung</h3>
<pre><code class="cs">High
High[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_25">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_31">Beispiel</h3>
<pre><code class="cs">//Höchstkurs der aktuellen Periode
Print(Time[0] + &quot; &quot; + High[0]);
// Höchstkurs des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + High[5]);
// aktueller Wert für den SMA 14 über die Höchstkurse (gerundet)
Print(&quot;SMA(14) Calculated using the high prices: &quot; + Instrument.Round2TickSize(SMA(High, 14)[0]));
</code></pre>

<h2 id="highs">Highs</h2>
<h3 id="beschreibung_37">Beschreibung</h3>
<p>Highs ist ein Array von [<em>DataSeries</em>][1] welches alle High-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge.</p>
<p>Highs[0] die High-Dataseries der Chart-Zeiteinheit
Highs[1] die High-Dataseries aller Bars auf Tagesbasis
Highs[2] die High-Dataseries aller Bars auf Wochenbasis.</p>
<p>Highs[0][0] entspricht High[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_26">Parameter</h3>
<p>barsAgo  Indexwert der einzelnen Bars innerhalb der Dataseries (s. <a href="#bars"><em>Bars</em></a>)
barSeriesIndex  Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_34">Verwendung</h3>
<pre><code class="cs">Highs[int barSeriesIndex]
Highs[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_26">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_32">Beispiel</h3>
<p>Siehe Beispiel unter  <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="low">Low</h2>
<h3 id="beschreibung_38">Beschreibung</h3>
<p>Low ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>,  in der die historischen Tiefstkurse gespeichert sind.</p>
<h3 id="parameter_27">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_35">Verwendung</h3>
<pre><code class="cs">Low
Low[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_27">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_33">Beispiel</h3>
<pre><code class="cs">// Tiefstkurs der aktuellen Periode
Print(Time[0] + &quot; &quot; + Low[0]);
// Tiefstkurs des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Low[5]);
// aktueller Wert für den SMA 14 über die Tiefstkurse (gerundet)
Print(&quot;SMA(14) calculated using the high prices: &quot; + Instrument.Round2TickSize(SMA(Low, 14)[0]));
</code></pre>

<h2 id="lows">Lows</h2>
<h3 id="beschreibung_39">Beschreibung</h3>
<p>Lows ist ein Array von [<em>DataSeries</em>][1] welches alle <a href="#low"><em>Low</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong>  enthält das Array 3 Einträge.</p>
<p>Lows[0] die Low-Dataseries der Chart-Zeiteinheit
Lows[1] die Low-Dataseries aller Bars auf Tagesbasis
Lows[2] die Low-Dataseries aller Bars auf Wochenbasis.</p>
<p>Lows[0][0] entspricht Low[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_28">Parameter</h3>
<p>barsAgo  Indexwert der einzelnen Bars innerhalb der Dataseries
barSeriesIndex  Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_36">Verwendung</h3>
<pre><code class="cs">Lows[int barSeriesIndex]
Lows[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_28">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_34">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="close">Close</h2>
<h3 id="beschreibung_40">Beschreibung</h3>
<p>Close ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>, in der die historischen Schlusskurse gespeichert sind.</p>
<h3 id="parameter_29">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_37">Verwendung</h3>
<pre><code class="cs">Close
Close[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_29">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Indikatoren werden standardmäßig über die Schlusskurse berechnet. Die Angabe der Input-Serie kann weggelassen werden (siehe Beispiel unten).</p>
<h3 id="beispiel_35">Beispiel</h3>
<pre><code class="cs">// Schlusskurs der aktuellen Periode
Print(Time[0] + &quot; &quot; + Close[0]);
// Schlusskurs des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Close[5]);
// aktueller Wert für den SMA 14 über die Schlusskurse (gerundet)
Print(&quot;SMA(14) calculated using the closing prices: &quot; + Instrument.Round2TickSize(SMA(Close, 14)[0]));
// Close kann auch weggelassen werden, da es per Default verwendet wird.
Print(&quot;SMA(14) calculated using the closing prices: &quot; + Instrument.Round2TickSize(SMA(14)[0]));
</code></pre>

<h2 id="closes">Closes</h2>
<h3 id="beschreibung_41">Beschreibung</h3>
<p>Closes ist ein Array von [<em>DataSeries</em>][1] welches alle <a href="#low"><em>Low</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge.</p>
<p>Closes[0] die Close-Dataseries der Chart-Zeiteinheit
Closes[1] die Close-Dataseries aller Bars auf Tagesbasis
Closes[2] die Close-Dataseries aller Bars auf Wochenbasis.</p>
<p>Closes[0][0] entspricht Close[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_30">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries 
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_38">Verwendung</h3>
<pre><code class="cs">Closes[int barSeriesIndex]
Closes[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_30">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_36">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="median">Median</h2>
<h3 id="beschreibung_42">Beschreibung</h3>
<p>Median ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>in der die historischen Median-Werte gespeichert sind.</p>
<p>Der Median-Preis eines Bars ergibt sich aus (High + Low) / 2.</p>
<p>Siehe auch <a href="#typical"><em>Typical</em></a> und <a href="#weighted"><em>Weighted</em></a>.</p>
<h3 id="parameter_31">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_39">Verwendung</h3>
<pre><code class="cs">Median
Median[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_31">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Informationen zu Median, Typical und Weighted:
<a href="http://blog.nobletrading.com/2009/12/median-price-typical-price-weighted.html"><em>http://blog.nobletrading.com/2009/12/median-price-typical-price-weighted.html</em></a></p>
<h3 id="beispiel_37">Beispiel</h3>
<pre><code class="cs">// Median-Preis der aktuellen Periode
Print(Time[0] + &quot; &quot; + Median[0]);
// Median-Preis des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Median[5]);
// aktueller Wert für den SMA 14 über die Median-Preise (gerundet)
Print(&quot;SMA(14) calculated using the median prices: &quot; + Instrument.Round2TickSize(SMA(Median, 14)[0]));
</code></pre>

<h2 id="medians">Medians</h2>
<h3 id="beschreibung_43">Beschreibung</h3>
<p>Medians ist ein Array von  [<em>DataSeries</em>][1] welches alle <a href="#median"><em>Median</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong>  enthält das Array 3 Einträge.</p>
<p>Medians[0] die Median-Dataseries der Chart-Zeiteinheit
Medians[1] die Median-Dataseries aller Bars auf Tagesbasis
Medians[2] die Median-Dataseries aller Bars auf Wochenbasis.</p>
<p>Medians[0][0]entspricht Medians[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_32">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_40">Verwendung</h3>
<pre><code class="cs">Medians[int barSeriesIndex]
Medians[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_32">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Informationen zu Median, Typical und Weighted: <a href="http://www.investopedia.com/terms/m/median.asp">http://www.investopedia.com/terms/m/median.asp</a></p>
<h3 id="beispiel_38">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="typical">Typical</h2>
<h3 id="beschreibung_44">Beschreibung</h3>
<p>Typical ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>in der die historischen Typical-Werte gespeichert sind.</p>
<p>Der Typical-Preis eines Bars ergibt sich aus (High + Low + Close) / 3.</p>
<p>Siehe auch <a href="#median"><em>Median</em></a> und <a href="#weighted"><em>Weighted</em></a>.</p>
<h3 id="parameter_33">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_41">Verwendung</h3>
<pre><code class="cs">Typical
Typical[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_33">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Informationen zu Median, Typical und Weighted: <a href="https://technicianapp.com/resources/typical-price/"><em>https://technicianapp.com/resources/typical-price/</em></a></p>
<h3 id="beispiel_39">Beispiel</h3>
<pre><code class="cs">// Typical-Preis der aktuellen Periode
Print(Time[0] + &quot; &quot; + Typical[0]);
// Typical-Preis des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Typical[5]);
// aktueller Wert für den SMA 14 über die Typical-Preise (gerundet)
Print(&quot;SMA(14) calculated using the typical price: &quot; + Instrument.Round2TickSize(SMA(Typical, 14)[0]));
</code></pre>

<h2 id="typicals">Typicals</h2>
<h3 id="beschreibung_45">Beschreibung</h3>
<p>Typicals ist ein Array von <em>Datenserien</em>, welches alle  <a href="#typical"><em>Typical</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge.</p>
<p>Typicals[0] die Typical-Dataseries der Chart-Zeiteinheit
Typicals[1] die Typical-Dataseries aller Bars auf Tagesbasis
Typicals[2] die Typical-Dataseries aller Bars auf Wochenbasis.</p>
<p>Typicals[0][0] entspricht Typicals[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_34">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_42">Verwendung</h3>
<pre><code class="cs">Typicals[int barSeriesIndex]
Typicals[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_34">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_40">Beispiel</h3>
<p>Siehe Beispiel unter  <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="weighted">Weighted</h2>
<h3 id="beschreibung_46">Beschreibung</h3>
<p>Weighted ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>, in der die historischen Weighted-Werte gespeichert.</p>
<p>Der Weighted-Preis eines Bars ergibt sich aus (high + low + 2*close) / gewichtet auf den Schlusskurs.</p>
<p>Siehe auch <a href="#median"><em>Median</em></a> und <a href="#typical"><em>Typical</em></a>.</p>
<h3 id="parameter_35">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_43">Verwendung</h3>
<pre><code class="cs">Weighted[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_35">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Informationen zu Median, Typical und Weighted: <a href="http://www.stock-trading-infocentre.com/pivot-points.html"><em>http://www.stock-trading-infocentre.com/pivot-points.html</em></a></p>
<h3 id="beispiel_41">Beispiel</h3>
<pre><code class="cs">// Weighted-Preis der aktuellen Periode
Print(Time[0] + &quot; &quot; + Weighted[0]);
// Weighted-Preis des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Weighted[5]);
// aktueller Wert für den SMA 14 über die Weighted-Preise (gerundet)
Print(&quot;SMA(14) calculated using the weighted price: &quot; + Instrument.Round2TickSize(SMA(Weighted, 14)[0]));
</code></pre>

<h2 id="weighteds">Weighteds</h2>
<h3 id="beschreibung_47">Beschreibung</h3>
<p>Weighteds ist ein Array von  [<em>DataSeries</em>][1] welches alle <a href="#weighted"><em>Weighted</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong>   enthält das Array 3 Einträge.</p>
<p>Weighteds[0] die Weighted-Dataseries der Chart-Zeiteinheit
Weighteds[1] die Weighted-Dataseries aller Bars auf Tagesbasis
Weighteds[2] die Weighted-Dataseries aller Bars auf Wochenbasis</p>
<p>Weighteds[0][0] entspricht Weighteds[0].</p>
<p>Siehe auch  <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_36">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries 
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_44">Verwendung</h3>
<pre><code class="cs">Weighteds[int barSeriesIndex]
Weighteds[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_36">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_42">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="time">Time</h2>
<h3 id="beschreibung_48">Beschreibung</h3>
<p>Time ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#datatimeseries"><em>DateTimeSeries</em></a>, in der die Zeitstempel der einzelnen Bars gespeichert sind.</p>
<h3 id="parameter_37">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_45">Verwendung</h3>
<pre><code class="cs">Time
Time[int barsAgo]
</code></pre>

<h3 id="weitere-informationen_37">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_43">Beispiel</h3>
<pre><code class="cs">// Zeitstempel der aktuellen Periode
Print(Time[0]);
// Zeitstempel des Bars von vor 5 Perioden
Print(Time[5]);
</code></pre>

<h2 id="times">Times</h2>
<h3 id="beschreibung_49">Beschreibung</h3>
<p>Times ist ein Array von <a href="#dataseries"><em>DataSeries</em></a> welches alle <a href="#time"><em>Time</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.
Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong>   enthält das Array 3 Einträge.</p>
<p>Times[0] die Time-Dataseries der Chart-Zeiteinheit
Times[1] die Time-Dataseries aller Bars auf Tagesbasis
Times[2] die Time-Dataseries der Chart-Zeiteinheit</p>
<p>Times[0][0] entspricht Times[0].</p>
<p>Siehe auch  <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_38">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries
barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_46">Verwendung</h3>
<pre><code class="cs">Times[int barSeriesIndex]
Times[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_38">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_44">Beispiel</h3>
<p>Siehe Beispiel unter <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="volume">Volume</h2>
<h3 id="beschreibung_50">Beschreibung</h3>
<p>Volume ist eine <a href="#dataseries"><em>DataSeries</em></a> vom Typ <a href="#dataseries"><em>DataSeries</em></a>,  in der die historischen Umsätze gespeichert sind.</p>
<h3 id="parameter_39">Parameter</h3>
<p>barsAgo Indexwert (s. <a href="#bars"><em>Bars</em></a>)</p>
<h3 id="verwendung_47">Verwendung</h3>
<p>Volume</p>
<p>Volume[<strong>int</strong> barsAgo]</p>
<h3 id="weitere-informationen_39">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<p>Der vom Indikator <a href="#vol"><em>VOL()</em></a> zurückgelieferte Wert ist identisch mit dem hier beschriebenen Volumen.
Z.B. liefert Vol()[3]  den gleichen Wert wie Volume[3].</p>
<h3 id="beispiel_45">Beispiel</h3>
<pre><code class="cs">// Volumen der aktuellen Periode
Print(Time[0] + &quot; &quot; + Volume[0]);
// Volumen des Bars von vor 5 Perioden
Print(Time[5] + &quot; &quot; + Volume[5]);
// aktueller Wert für den SMA 14 über das Volumen (gerundet)
Print(&quot;SMA(14) berechnet über das Volumen: &quot; + Instrument.Round2TickSize(SMA(Volume, 14)[0]));
</code></pre>

<h2 id="volumes">Volumes</h2>
<h3 id="beschreibung_51">Beschreibung</h3>
<p>Volumes ist ein Array von <a href="#dataseries"><em>DataSeries</em></a> welches alle <a href="#volume"><em>Volume</em></a>-Datenserien enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong>   enthält das Array 3 Einträge.</p>
<p>Volumes[0] die Volume-Dataseries der Chart-Zeiteinheit
Volumes[1] die Volume-Dataseries aller Bars auf Tagesbasis
Volumes[2] die Volume-Dataseries aller Bars auf Wochenbasis.</p>
<p>Volumes[0][0] entspricht Volumes[0].</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_40">Parameter</h3>
<p>barsAgo Indexwert der einzelnen Bars innerhalb der Dataseries</p>
<p>barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_48">Verwendung</h3>
<pre><code class="cs">Volumes[int barSeriesIndex]
Volumes[int barSeriesIndex][int barsAgo]
</code></pre>

<h3 id="weitere-informationen_40">Weitere Informationen</h3>
<p>Der zurückgegebene Wert ist abhängig von der Eigenschaft  <a href="#calculateonclosebar"><em>CalculateOnClosedBar</em></a>.</p>
<h3 id="beispiel_46">Beispiel</h3>
<p>Siehe Beispiel unter  <a href="#multibars"><em>Multibars</em></a>.</p>
<h2 id="timeframe">TimeFrame</h2>
<h3 id="beschreibung_52">Beschreibung</h3>
<p>TimeFrame ist ein Zeitrahmenobjekt.</p>
<h3 id="verwendung_49">Verwendung</h3>
<pre><code class="cs">TimeFrame
</code></pre>

<h2 id="timeframes">TimeFrames</h2>
<h3 id="beschreibung_53">Beschreibung</h3>
<p>TimeFrames ist ein Array von TimeFrame-Objekten, welches für jedes Bar-Objekt ein separates TimeFrame-Objekt  enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge:</p>
<p>TimeFrames [0] TimeFrame der primären Datenserie (Chart-Zeiteinheit)
TimeFrames [1] <strong>Print</strong>(TimeFrames[1]);  // liefert "1 Day"
TimeFrames [2] <strong>Print</strong>(TimeFrames[2]); // liefert "1 Week"</p>
<p>TimeFrames [0] entspricht <a href="#timeframe"><em>TimeFrame</em></a>.</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_41">Parameter</h3>
<p>barSeriesIndex Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_50">Verwendung</h3>
<pre><code class="cs">TimeFrames [int barSeriesIndex]
</code></pre>

<h3 id="beispiel_47">Beispiel</h3>
<pre><code class="cs">if (ProcessingBarSeriesIndex == 0 &amp;&amp; ProcessingBarIndex == 0)
for (int i = BarsArray.Count-1; i &gt;= 0; i--)
Print(&quot;The Indicator &quot; + this.Name + &quot; uses Bars of the Timeframe &quot; + TimeFrames[i]);
</code></pre>

<h2 id="instruments">Instruments</h2>
<p>"Instrument" bezeichnet einen handelbaren Wert, wie z.B. eine Aktie, einen ETF, einen Future, einen CFD usw.</p>
<p>Ein Instrument hat viele Eigenschaften, die in einem selbst erstellten AgenaScript verwendet werden können.</p>
<p><a href="#instrumentcompare"><em>Instrument.Compare</em></a></p>
<p><a href="#instrumentcurrency"><em>Instrument.Currency</em></a></p>
<p><a href="#instrumentdigits"><em>Instrument.Digits</em></a></p>
<p><a href="#instrumentetf"><em>Instrument.ETF</em></a></p>
<p><a href="#instrumentexchange"><em>Instrument.Exchange</em></a></p>
<p><a href="#instrumentexpiry"><em>Instrument.Expiry</em></a></p>
<p><a href="#instrumentgetcurrencyfactor"><em>Instrument.GetCurrencyFactor</em></a></p>
<p><a href="#instrumentinstrumenttype"><em>Instrument.InstrumentType</em></a></p>
<p><a href="#instrumentmainsector"><em>Instrument.MainSector</em></a></p>
<p><a href="#instrumentmargin"><em>Instrument.Margin</em></a></p>
<p><a href="#instrumentname"><em>Instrument.Name</em></a></p>
<p><a href="#instrumentpointvalue"><em>Instrument.PointValue</em></a></p>
<p><a href="#instrumentround2ticksize"><em>Instrument.Round2TickSize</em></a></p>
<p><a href="#instrumentsymbol"><em>Instrument.Symbol</em></a></p>
<p><a href="#instrumentticksize"><em>Instrument.TickSize</em></a></p>
<p>Innerhalb von  <strong>OnCalculate()</strong> können diese Eigenschaften verwendet werden, ohne vorher auf Null-Reference testen zu müssen.
Sobald die Funktion  <strong>OnCalculate()</strong>  von AgenaScript aufgerufen wird, ist immer auch ein Instrument-Objekt vorhanden. Falls diese Eigenschafte ausserhalb von <strong>OnCalculate()</strong>, verwendet werden, sollte vorher ein entsprechender Test auf Null-Reference z.B. mit <strong>if</strong> (Bars != <strong>null</strong>)</p>
<h2 id="instrumentcompare">Instrument.Compare</h2>
<h3 id="beschreibung_54">Beschreibung</h3>
<p>Die Funktion Instrument.Compare vergleicht 2 Kursdaten unter Berücksichtigung der richtigen Anzahl Nachkommastellen. Die kleinstmögliche Preisänderung wird durch den Wert TickSize angegeben. Diese Funktion vereinfacht den sonst etwas aufwändigeren Vergleich mit Hilfe von Floating-Point-Operationen.</p>
<h3 id="parameter_42">Parameter</h3>
<p>double value1
double value2</p>
<h3 id="ruckgabewert_28">Rückgabewert</h3>
<p>Typ int</p>
<p>1 - Kurs1 ist größer als Kurs2
-1 - Kurs1 ist kleiner als Kurs2
 0 - Kurs1 und Kurs2 sind gleich</p>
<h3 id="verwendung_51">Verwendung</h3>
<pre><code class="cs">Instrument.Compare(double Value1, double Value2)
</code></pre>

<h3 id="weitere-informationen_41">Weitere Informationen</h3>
<p><strong>Be aware this function compares prices based on TickSize.</strong> If the ticksize of your instrument is 0.01 these prices will be rounded and compared on 2 decimal digits. If you want a regular comparation of two numbers, you should use the operator "greater than" (&gt;) or the operator "smaller than" (&lt;).</p>
<p>More infomation about <a href="https://msdn.microsoft.com/en-us//library/75ks3aby(v=vs.110).aspx">math.round()</a></p>
<p>Wenn TickSize z.B. 0,00001 ist, wie bei FX-Werten üblich, dann liefert</p>
<p>Compare(2, 1.99999) eine 1, d.h. 2 ist größer als 1.99999
Compare(2, 2.000001)    eine 0, d.h. die Kurse sind gleich
Compare(2, 1.999999)    eine 0, d.h. die Kurse sind gleich
Compare(2, 2.00001) eine -1, d.h. 2 ist kleiner als 2.00001.</p>
<h3 id="beispiel_48">Beispiel</h3>
<pre><code class="cs">Print(Instrument.Compare(2, 1.999999));
</code></pre>

<h2 id="instrumentcurrency">Instrument.Currency</h2>
<h3 id="beschreibung_55">Beschreibung</h3>
<p>Instrument.Currency liefert ein Currencies-Objekt zurück, das die jeweilige Währung beinhaltet, in der das Instrument gehandelt wird.</p>
<h3 id="parameter_43">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_29">Rückgabewert</h3>
<p>eine Konstante vom Typ public enum Currencies</p>
<h3 id="verwendung_52">Verwendung</h3>
<p>Instrument.Currency</p>
<h3 id="weitere-informationen_42">Weitere Informationen</h3>
<p>Übliche Währungen sind z.B. AUD, CAD, EUR, GBP, JPY oder USD.</p>
<h3 id="beispiel_49">Beispiel</h3>
<pre><code class="cs">Print(Instrument.Name + &quot;wird in  &quot; + Instrument.Currency + &quot; gehandelt&quot;.);
</code></pre>

<h2 id="instrumentdigits">Instrument.Digits</h2>
<h3 id="beschreibung_56">Beschreibung</h3>
<p>Instrument.Digits liefert die Anzahl der Nachkommastellen, mit denen der Kurs des Instrument notiert wird.</p>
<h3 id="parameter_44">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_30">Rückgabewert</h3>
<p>int Digits</p>
<h3 id="verwendung_53">Verwendung</h3>
<p>Instrument.Digits</p>
<h3 id="weitere-informationen_43">Weitere Informationen</h3>
<p>Aktie werden üblicherweise mit 2 Stellen nach dem Komma gehandelt. Bei Forex sind es je nach Datenanbieter 4 oder 5 Stellen.</p>
<p>Die Funktion findet u.a. Verwendung für das Formatieren von Ausgaben oder zur Rundung von Kursdaten. Siehe auch <a href="#ticksize"><em>TickSize</em></a> und <a href="../instrumentround2ticks"><em>Instrument.Round2Ticks</em></a>, <a href="#instrumentround2ticksize"><em>Instrument.Round2TickSize</em></a>.</p>
<p>Ausführliche Anleitung zum: <em>Formatieren von Zahlen.</em>.</p>
<h3 id="beispiel_50">Beispiel</h3>
<pre><code class="cs">Print(&quot;Der Kurs von  &quot; +Instrument.Name + &quot; wird mit einer Genauigkeit von&quot; + Instrument.Digits +&quot; Nachkommastellen angegeben.&quot;);
</code></pre>

<h2 id="instrumentetf">Instrument.ETF</h2>
<h3 id="beschreibung_57">Beschreibung</h3>
<p>Instrument.ETF dient der Unterscheidung zwischen einer Aktie und einem ETF. Dies ist notwendig, da ETF's von den Börsen auch als "Stock" (dt. Aktie) angesehen werden..</p>
<h3 id="parameter_45">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_31">Rückgabewert</h3>
<p>Typ bool</p>
<h3 id="verwendung_54">Verwendung</h3>
<p>Instrument.ETF</p>
<h3 id="weitere-informationen_44">Weitere Informationen</h3>
<p>Was ist ein ETF?</p>
<p>Wikipedia: <a href="http://de.wikipedia.org/wiki/Exchange-traded_fund*"><em>http://de.wikipedia.org/wiki/Exchange-traded_fund</em></a></p>
<h3 id="beispiel_51">Beispiel</h3>
<pre><code class="cs">if (Instrument.InstrumentType == InstrumentType.Stock)
if (Instrument.ETF)
Print(&quot;Der Wert ist ein Exchange-traded Fund.&quot;);
else
Print(&quot;Der Wert ist eine Aktie.&quot;);
</code></pre>

<h2 id="instrumentexchange">Instrument.Exchange</h2>
<h3 id="beschreibung_58">Beschreibung</h3>
<p>Instrument.Exchange (Exchange = dt. Börse) liefert die Bezeichnung des Börsenhandelsplatzes für das aktuelle Instrument.</p>
<h3 id="parameter_46">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_32">Rückgabewert</h3>
<p>ein Exchange-Objekt vom Typ public enum Exchanges</p>
<h3 id="verwendung_55">Verwendung</h3>
<p>Instrument.Exchange</p>
<h3 id="weitere-informationen_45">Weitere Informationen</h3>
<p><a href="http://www.boersen-links.de/boersen.htm">Übersicht Börsenhandelsplätze</a></p>
<h3 id="beispiel_52">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das Instrument &quot; + Instrument.Name +&quot;  wird an der Börse &quot; + Instrument.Exchange + &quot; gehandelt.&quot;);
</code></pre>

<h2 id="instrumentexpiry">Instrument.Expiry</h2>
<h3 id="beschreibung_59">Beschreibung</h3>
<p>Instrument.Expiry gibt das Datum (Monat und Jahr) des Ablauf eines Finanzinstrumentes an. Nur derivative Handelsinstrumente, wie Optionen oder Futures besitzen ein Ablaufdatum, das sog. Verfallsdatum.</p>
<h3 id="parameter_47">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_33">Rückgabewert</h3>
<p>Typ DateTime</p>
<p>Für Instrumente ohne Verfallsdatum wird Instrument.Expiry auf DateTime.MaxValue (= 31.12.9999 23.59:59) gesetzt.</p>
<h3 id="verwendung_56">Verwendung</h3>
<p>Instrument.Expiry</p>
<h3 id="weitere-informationen_46">Weitere Informationen</h3>
<p>Das Verfallsdatum (Expiry) ist auch im Instrument Escort ersichtlich:</p>
<p><img alt="Instrument.Expiry" src="../media/image5.png" /></p>
<h3 id="beispiel_53">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das Instrument &quot; + Instrument.Name +&quot; verfällt am &quot; + Instrument.Expiry);
</code></pre>

<h2 id="instrumentgetcurrencyfactor">Instrument.GetCurrencyFactor</h2>
<h3 id="beschreibung_60">Beschreibung</h3>
<p>Instrument.GetCurrencyFactor liefert einen Umrechnungsfaktor zurück, mit dessen Hilfe man den Kurs eines Instruments in die Währung des Accounts umrechnen kann.</p>
<h3 id="parameter_48">Parameter</h3>
<p>Typ Currencies</p>
<h3 id="ruckgabewert_34">Rückgabewert</h3>
<p>ein double</p>
<h3 id="verwendung_57">Verwendung</h3>
<p>Instrument.GetCurrencyFactor(Currencies)</p>
<h3 id="weitere-informationen_47">Weitere Informationen</h3>
<p>Übliche Währungen sind z.B. AUD, CAD, EUR, GBP, JPY oder USD.</p>
<h3 id="beispiel_54">Beispiel</h3>
<pre><code class="cs">Protected override void OnCalculate()
{
   double currFactor = Instrument.GetCurrencyFactor(Account.Currency);
   Print(Close[0] + &quot; in &quot; + Instrument.Currency.ToString() + &quot; = &quot; + (Close[0] * currFactor) + &quot; in &quot; + Account.Currency.ToString());
}
</code></pre>

<h2 id="instrumentinstrumenttype">Instrument.InstrumentType</h2>
<h3 id="beschreibung_61">Beschreibung</h3>
<p>Instrument.InstrumentType liefert ein Typ-Objekt des Handelsinstrumentes.</p>
<h3 id="parameter_49">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_35">Rückgabewert</h3>
<p>Objekt vom Typ public enum InstrumentType</p>
<h3 id="verwendung_58">Verwendung</h3>
<p>Instrument.InstrumentType</p>
<h3 id="weitere-informationen_48">Weitere Informationen</h3>
<p>Mögliche Werte sind: Future, Stock, Index, Currency, Option, CFD und Unknown.
Einen Typ ETF gibt es nicht. ETF's sind vom Typ Stock, siehe<a href="#instrumentetf"><em>Instrument.ETF</em></a>.</p>
<p>Der Instrument-Typ ist auch im Instrument Escort ersichtlich:</p>
<p><img alt="Instrument.InstrumentType" src="../media/image6.png" /></p>
<h3 id="beispiel_55">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das Instrument  &quot; + Instrument.Name + &quot;  ist vom Typ &quot; + Instrument.InstrumentType);
</code></pre>

<h2 id="instrumentmainsector">Instrument.MainSector</h2>
<h3 id="beschreibung_62">Beschreibung</h3>
<p>Instrument.MainSector liefert den Hauptsektor des Handelsinstrumentes zurück.</p>
<h3 id="parameter_50">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_36">Rückgabewert</h3>
<p>String</p>
<h3 id="verwendung_59">Verwendung</h3>
<p>Instrument.MainSector</p>
<h3 id="weitere-informationen_49">Weitere Informationen</h3>
<p>Der  Hauptsektor ist auch im Instrument Escort ersichtlich:
<img alt="Instrument.InstrumentType" src="../media/image6.png" /></p>
<h3 id="beispiel_56">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das Instrument &quot; + Instrument.Name + &quot; ist im Sektor &quot; + Instrument.MainSector + &quot; tätig.&quot;);
</code></pre>

<h2 id="instrumentmargin">Instrument.Margin</h2>
<h3 id="beschreibung_63">Beschreibung</h3>
<p>Instrument.Margin liefert die erforderliche Margin des Handelsinstrumentes zurück.</p>
<h3 id="parameter_51">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_37">Rückgabewert</h3>
<p>int</p>
<h3 id="verwendung_60">Verwendung</h3>
<p>Instrument.Margin</p>
<h3 id="weitere-informationen_50">Weitere Informationen</h3>
<p>Margin ist auch im Instrument Escort ersichtlich:
<img alt="Instrument.InstrumentType" src="../media/image6.png" /></p>
<h3 id="beispiel_57">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das Instrument&quot; + Instrument.Name + &quot; hat eine Margin von  &quot; + Instrument.Margin);
</code></pre>

<h2 id="instrumentname">Instrument.Name</h2>
<h3 id="beschreibung_64">Beschreibung</h3>
<p>Instrument.Name liefert die Bezeichnung des Handelsinstrumentes.</p>
<h3 id="parameter_52">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_38">Rückgabewert</h3>
<p>Typ string</p>
<h3 id="verwendung_61">Verwendung</h3>
<p>Instrument.Name</p>
<h3 id="weitere-informationen_51">Weitere Informationen</h3>
<p>Der Instrument Name ist auch im Instrument Escort ersichtlich:</p>
<p><img alt="Instrument.Name" src="../media/image7.png" /></p>
<h3 id="beispiel_58">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das aktuell im Chart geladene Instrument heißt &quot; + Instrument.Name);
</code></pre>

<h2 id="instrumentpointvalue">Instrument.PointValue</h2>
<h3 id="beschreibung_65">Beschreibung</h3>
<p>Instrument.PointValue liefert den Geldwert für die Bewegung eines Instrumentes von einem vollen Punkt.</p>
<h3 id="parameter_53">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_39">Rückgabewert</h3>
<p>Typ double - Punktwert</p>
<h3 id="verwendung_62">Verwendung</h3>
<p>Instrument.PointValue</p>
<h3 id="weitere-informationen_52">Weitere Informationen</h3>
<p><strong>Beispiele verschieder Punktwerte</strong>  (je Stück, CDF, Futurekontrakt, Lot usw.)</p>
<p>Aktie: im .allg. 1,00 Euro bzw. 1,00 USD.
EUR/USD: 100,000 USD
Dax-Future: 25,00 Euro</p>
<p><strong>Tickwert</strong></p>
<p>Der Tickwert ergibt sich, wenn man den Punktwert mit der TickGröße (TickSize) multipliziert.</p>
<p>z.B. hat der E-mini S&amp;P 500 einen Punktwert von $ 50. Die TickSize beträgt 0,25. Es braucht also eine Bewegung von 4 Ticks für einen vollen Punkt.
Aus 50 * 0,25 = 50 / 4 ergibt sich ein Tickwert von 12,50 $/ je Tick.</p>
<p>Der Punktwert ist auch im Instrument Escort ersichtlich:</p>
<p><img alt="Instrument.PointValue" src="../media/image8.png" /></p>
<h3 id="beispiel_59">Beispiel</h3>
<pre><code class="cs">Print(&quot;Wenn &quot; + Instrument.Name + &quot; einen vollen Punkt steigt, entspricht dies dem Gegenwert von  &quot; + Instrument.PointValue + &quot; &quot; + Instrument.Currency);
</code></pre>

<h2 id="instrumentround2ticksize">Instrument.Round2TickSize</h2>
<h3 id="beschreibung_66">Beschreibung</h3>
<p>Die Funktion Instrument.Round2TickSize rundet einen übergebenen Kurswert auf den kleinstmöglichen Wert, der durch die Tickgröße (TickSize) des Instrumentes teilbar ist.</p>
<h3 id="parameter_54">Parameter</h3>
<p>double - Kurswert</p>
<h3 id="ruckgabewert_40">Rückgabewert</h3>
<p>double</p>
<h3 id="verwendung_63">Verwendung</h3>
<pre><code class="cs">Instrument.Round2TickSize(double MarketPrice)
</code></pre>

<h3 id="weitere-informationen_53">Weitere Informationen</h3>
<p>Die Anzahl der Nachkommastellen, auf die gerundet wird, ist je nach Instrument unterschiedlich.
Ist das Instrument eine Aktie, wird auf 2 Nachkommastellen gerundet, bei einem Forex-Wert auf 4 bzw. 5 Nachkommastellen.</p>
<p>Siehe auch  <a href="#ticksize"><em>TickSize</em></a> und <a href="#instrumentdigits"><em>Instrument.Digits</em></a>.</p>
<p>Beispiele für professionelle  <a href="#formatting"><em>Formatting</em></a>, <em>Formatting of Numbers</em>.</p>
<h3 id="beispiel_60">Beispiel</h3>
<pre><code class="cs">double Price = 12.3456789;
Print(Price + &quot;  gerundet auf einen für &quot; + Instrument.Name + &quot; gültigen Kurs ist &quot; + Instrument.Round2TickSize(Price));
</code></pre>

<h2 id="instrumentsymbol">Instrument.Symbol</h2>
<h3 id="beschreibung_67">Beschreibung</h3>
<p>Instrument.Symbol liefert das Symbol, unter welchem das Handelsinstrument in AgenaTrader eindeutig identifizierbar ist. Anhand des Symbols werden die Mappings zu den verschiedenen Datenanbietern und Brokern verwaltet.</p>
<h3 id="parameter_55">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_41">Rückgabewert</h3>
<p>Typ string</p>
<h3 id="verwendung_64">Verwendung</h3>
<p>Instrument.Symbol</p>
<h3 id="weitere-informationen_54">Weitere Informationen</h3>
<p>Mit dem Symbol werden gleiche Aktion an verschiedenen Börsenplätzen unterschieden. Das Symbol BMW.DE ist z.B. die BMW-Aktie an der Xetra, BMW.CFD ist der CFD auf die BMW-Aktie.</p>
<p>Das Instrument Symbol ist auch im Instrument Escort ersichtlich:</p>
<p><img alt="Instrument.Symbol" src="../media/image9.png" /></p>
<h3 id="beispiel_61">Beispiel</h3>
<pre><code class="cs">Print(&quot;Das aktuell im Chart geladene Instrument hat das Symbol  &quot; + Instrument.Symbol);
</code></pre>

<h2 id="instrumentticksize">Instrument.TickSize</h2>
<h3 id="beschreibung_68">Beschreibung</h3>
<p>Die Tickgröße oder TickSize ist die kleinste mögliche Einheit um die sich ein Finanzinstrument bewegen kann. Dies ist umgangssprachlich 1 Tick.</p>
<h3 id="parameter_56">Parameter</h3>
<p>keine</p>
<h3 id="ruckgabewert_42">Rückgabewert</h3>
<p>double</p>
<h3 id="verwendung_65">Verwendung</h3>
<p>Instrument.TickSize oder vereinfacht TickSize</p>
<h3 id="weitere-informationen_55">Weitere Informationen</h3>
<p>Das Schlüsselwort <a href="#ticksize"><em>TickSize</em></a> entspricht Instrument.TickSize. Beide Aufrufe liefern identische Werte und sind gegeneinander austauschbar.</p>
<h3 id="beispiele_4">Beispiele</h3>
<p>Aktie:  0,01
ES-Future: 0,25
EUR/USD: 0,00001</p>
<p>Siehe auch <a href="../instrumentpointvalue"><em>Instrument.PointValue</em></a> und <a href="#instrumentdigits"><em>Instrument.Digits</em></a>.</p>
<p>Beispiele für professionelle  <a href="#formatting"><em>Formatting</em></a>, <em>Formatting of Numbers</em>.</p>
<h3 id="beispiel_62">Beispiel</h3>
<pre><code class="cs">Print(&quot;Der Kurs von &quot; + Instrument.Name + &quot;  kann sich minimal um  &quot; + Instrument.TickSize + &quot; Punkt(e) verändern.&quot;);
</code></pre>

<h2 id="multibars">Multibars</h2>
<h3 id="beschreibung_69">Beschreibung</h3>
<p>Einem Indikator bzw. eine Strategie liegt immer die gleiche Zeiteinheit zugrunde, wie diejenige, in der der Chart angezeigt wird. Wird z.B. ein SMA(14) in einem 5-Minuten-Chart dargestellt, wird der gleitende Durchschnitt über die 14 letzten 5-Minuten-Bars berechnet. Auf einem Tageschart würden entsprechend die Schlusskurse der letzten 14 Tage zur Berechnung herangezogen werden.</p>
<p>Das gleiche Prinzip gilt für selbst entwickelte Indikatoren. In einem 5-Minuten-Chart würde die Methode <a href="#oncalculate"><em>OnCalculate()</em></a>  für jeden 5-Minuten-Bar aufgerufen werden.
Mit Multibars ist es außerdem möglich, Daten eines anderen Instrumentes zu laden.</p>
<h3 id="beispiel_63">Beispiel</h3>
<pre><code class="cs">using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Linq;
using System.Xml;
using System.Xml.Serialization;
using AgenaTrader.API;
using AgenaTrader.Custom;
using AgenaTrader.Plugins;
using AgenaTrader.Helper;
namespace AgenaTrader.UserCode
{
    [Description(&quot;Multibar Demo&quot;)]
    // Der Indikator benötigt Tages- und Wochendaten
    [TimeFrameRequirements(&quot;1 Day&quot;, &quot;1 Week&quot;)]
    public class MultiBarDemo : UserIndicator
    {
        private static readonly TimeFrame TF_Day = new TimeFrame(DatafeedHistoryPeriodicity.Day, 1);
        private static readonly TimeFrame TF_Week = new TimeFrame(DatafeedHistoryPeriodicity.Week, 1);

        protected override void OnBarsRequirements()
        {
            Add(TF_Day);
            Add(TF_Week);
        }

        protected override void OnInit()
        {
            CalculateOnClosedBar = true;
        }
        protected override void OnCalculate()
        {
            // aktueller Wert für den SMA 14 auf Tagesbasis
            Print(&quot;TF0: &quot; + SMA(Closes[0], 14)[0]);
            // The current value for the SMA 14 in a daily timeframe
            Print(&quot;TF1: &quot; + SMA(Closes[1], 14)[0]);
             // aktueller Wert für den SMA 14 auf Wochenbasis
            Print(&quot;TF2: &quot; + SMA(Closes[2], 14)[0]);
        }
    }
}
</code></pre>

<h3 id="weitere-hinweise">Weitere Hinweise</h3>
<p>Bei Verwendung weiterer Zeiteinheiten wird den Arrays <a href="#opens"><em>Opens</em></a>, <a href="#highs"><em>Highs</em></a>, <a href="#lows"><em>Lows</em></a>, <a href="#closes"><em>Closes</em></a>, <a href="#medians"><em>Medians</em></a>, <a href="#typicals"><em>Typicals</em></a>, <a href="#weighteds"><em>Weighteds</em></a>, <a href="#times"><em>Times</em></a> und <a href="#volumes"><em>Volumes</em></a>  ein weiterer Eintrag mit den jeweiligen Datenserien der Bars der neuen Zeiteinheit hinzugefügt. Die Indizierung erfolgt in der Reihenfolge des Hinzufügens der Zeiteinheiten.
Closes[0][0] entspricht Close[0].
Closes[1][0] entspricht dem aktuellen Schlusskurs der Tagesdatenreihe.
Closes[2][0] entspricht dem aktuellen Schlusskurs der Wochendatenreihe.</p>
<p>"Closes"kann in den Beispielen selbstverständlich auch durch Opens, Highs, Lows usw. ersetzt werden.</p>
<p>Siehe auch <a href="#processingbarindexes"><em>ProcessingBarIndexes</em></a>, <a href="#processingbarseriesindex"><em>ProcessingBarSeriesIndex</em></a>, <a href="#timeframes"><em>TimeFrames</em></a>, <a href="../timeframerequirements"><em>TimeFrameRequirements</em></a>.</p>
<p>Es gibt noch eine weitere Schreibweise für Multbars:</p>
<pre><code class="cs">// unter Variablendeklaration wird die Variable TF_Day definiert
private static readonly TimeFrame TF_Day = new TimeFrame(DatafeedHistoryPeriodicity.Day, 1);
private static readonly TimeFrame TF_Week = new TimeFrame(DatafeedHistoryPeriodicity.Week, 1);
// Die folgende Anweisung ist identisch mit double d = Closes[1][0];
double d = MultiBars.GetBarsItem(TF_Day).Close[0];
//  Die folgende Anweisung ist identisch mit double w = Closes[2][0];
double w = MultiBars.GetBarsItem(TF_Week).Close[0];
</code></pre>

<h2 id="processingbarindexes">ProcessingBarIndexes</h2>
<h3 id="beschreibung_70">Beschreibung</h3>
<p>CurrentBars ist ein Array von int-Werten, welches für jedes Bar-Objekt die Nummer von <a href="#processingbarindex"><em>ProcessingBarIndex</em></a> enthält.</p>
<p>Dieses Array ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.</p>
<p>Ein neuer Eintrag wird dem Array immer dann hinzugefügt, wenn dem Indikator bzw. der Strategie eine neue Zeiteinheit hinzugefügt wird.</p>
<p>Mit <strong>[TimeFrameRequirements(("1 Day"), ("1 Week"))]</strong> enthält das Array 3 Einträge:</p>
<p>ProcessingBarIndexes[0] ProcessingBarIndexes der primären Datenserie (Chart-Zeiteinheit)
ProcessingBarIndexes[1] ProcessingBarIndexes für die Tagesbars
ProcessingBarIndexes[2] ProcessingBarIndexes für die Wochenbars.</p>
<p>ProcessingBarIndexes[0] entspricht <a href="#processingbarindex"><em>ProcessingBarIndex</em></a>.</p>
<p>Siehe auch <a href="#multibars"><em>MultiBars</em></a>.</p>
<h3 id="parameter_57">Parameter</h3>
<p>barSeriesIndex  Indexwert der unterschiedlichen Zeiteinheiten</p>
<h3 id="verwendung_66">Verwendung</h3>
<pre><code class="cs">ProcessingBarIndexes[int barSeriesIndex]
</code></pre>

<h3 id="beispiel_64">Beispiel</h3>
<pre><code class="cs">//Sicherstellen, dass mind. 20 Bars geladen sind
for (int i=0; i&lt;ProcessingBarIndexes.Count; i++)
if (ProcessingBarIndexes[i] &lt; 20) return;
</code></pre>

<h2 id="processingbarseriesindex_1">ProcessingBarSeriesIndex</h2>
<h3 id="description_1">Description</h3>
<p>In einem Multibar-Script, d.h. in einem Indikator (bzw. einer Strategie), der mit mehreren Zeiteinheiten arbeitet, sind mehrere Bars-Objekte vorhanden. Die Methode OnCalculate() wird für jeden Bar im Script aufgerufen. Um Ereignisse bestimmter Datenreihen in die Berechnung einzubeziehen bzw. auszublenden ist BarsInProgress zu verwenden.</p>
<p>ProcessingBarSeriesIndex ist nur in Indikatoren bzw. Strategien von Bedeutung, die Daten aus mehreren Zeiteinheiten verarbeiten.
Mit <strong>[TimeFrameRequirements("1 Day", "1 Week")]</strong> werden 2 weitere Zeiteinheiten zur primären Chart-Zeiteinheit hinzugefügt.</p>
<p>Wenn OnCalculate() von der primären Datenreihe aufgerufen wird, ist ProcessingBarSeriesIndex=0. Wird OnCalculate() von den Tagesbars aufgerufen, ist ProcessingBarSeriesIndex=1, bei den Wochendaten hat BarsInProgress den Wert 2.</p>
<p>Siehe auch <a href="#multibars"><em>Multibars</em></a> and <a href="#processingbarindexes"><em>ProcessingBarIndexes</em></a>.</p>
<h3 id="parameter_58">Parameter</h3>
<p>keine</p>
<h3 id="verwendung_67">Verwendung</h3>
<p>ProcessingBarSeriesIndex</p>
<h3 id="weitere-informationen_56">Weitere Informationen</h3>
<p>In einem Script, welches nur auf der primären Zeiteinheit arbeitet, hat BarsInProgress immer den Wert 0.</p>
<h3 id="beispiel_65">Beispiel</h3>
<pre><code class="cs">// Arbeitsweise veranschaulichen
// ggf. CalculateOnBarClose=false setzen
Print(Time[0] + &quot; &quot; + ProcessingBarSeriesIndex);
// Berechnungen nur für die Chart-Zeiteinheit
protected override void OnCalculate()
{
if (ProcessingBarSeriesIndex &gt; 0) return;
// Logik für primäre Datenreihe
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ereignisse/" class="btn btn-neutral float-right" title="Ereignisse">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Los gehts"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/AgenaTrader/AgenaScript-documentation-de" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ereignisse/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
